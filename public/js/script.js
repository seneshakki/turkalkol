const API_URL='',DIR=API_URL+'/images/watermarked';let photos=[],index=0x0;const photoWrap=document['getElementById']('photoWrap'),mainPhotoEl=document['getElementById']('mainPhoto');function rndm(_0x540202,_0x56438c){return Math['floor'](Math['random']()*(_0x56438c-_0x540202+0x1))+_0x540202;}let userId=localStorage['getItem']('turkalkol_userId');!userId&&(userId='user_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9)+Date['now'](),localStorage['setItem']('turkalkol_userId',userId));let startX=0x0,currentX=0x0,dragging=![];const threshold=0x46,followRate=0.35;function swipeStart(_0x197fe3){if(!photos['length']||!mainPhotoEl)return;dragging=!![],startX=_0x197fe3,currentX=_0x197fe3,mainPhotoEl['style']['transition']='none';}function swipeMove(_0x515b29){if(!dragging||!mainPhotoEl)return;currentX=_0x515b29;const _0x3fc7b5=currentX-startX;mainPhotoEl['style']['transform']='translateX('+_0x3fc7b5*followRate+'px)';}function swipeEnd(){if(!dragging)return;dragging=![];const _0x9f81f4=currentX-startX;if(_0x9f81f4<-threshold&&index<photos['length']-0x1)render(index+0x1);else _0x9f81f4>threshold&&index>0x0&&render(index-0x1);mainPhotoEl['style']['transition']='transform\x200.2s\x20ease',mainPhotoEl['style']['transform']='translateX(0)';}photoWrap['addEventListener']('touchstart',_0x319326=>swipeStart(_0x319326['touches'][0x0]['clientX'])),photoWrap['addEventListener']('touchmove',_0x64c28=>swipeMove(_0x64c28['touches'][0x0]['clientX'])),photoWrap['addEventListener']('touchend',swipeEnd),photoWrap['addEventListener']('mousedown',_0x142197=>swipeStart(_0x142197['clientX'])),photoWrap['addEventListener']('mousemove',_0x2aff5c=>swipeMove(_0x2aff5c['clientX'])),photoWrap['addEventListener']('mouseup',swipeEnd),photoWrap['addEventListener']('mouseleave',swipeEnd);async function loadLikes(_0x3492d0,_0x5aca11=0x2){for(let _0x11a27d=0x0;_0x11a27d<=_0x5aca11;_0x11a27d++){try{const _0x4b42ca=await fetch(API_URL+'/likes/'+_0x3492d0,{'cache':'no-store','headers':{'Cache-Control':'no-cache'}});if(!_0x4b42ca['ok'])return{'count':0x0,'users':[]};const _0x3a2678=await _0x4b42ca['json']();return _0x3a2678;}catch(_0x5b43c0){if(_0x11a27d===_0x5aca11)return console['error']('Like\x20yÃ¼kleme\x20hatasÄ±:',_0x5b43c0),{'count':0x0,'users':[]};await new Promise(_0x104765=>setTimeout(_0x104765,0x1f4));}}return{'count':0x0,'users':[]};}async function toggleLike(_0x5bb14d){const _0x53ccb6=await fetch(API_URL+'/like/'+_0x5bb14d,{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'userId':userId})});if(!_0x53ccb6['ok'])throw new Error('BeÄŸeni\x20gÃ¶nderilemedi');return await _0x53ccb6['json']();}async function updateLikeButton(_0x5ea81f){const _0x5500a8=document['getElementById']('likeBtn'),_0x376b0b=document['getElementById']('likeCount'),_0xb3bd2c=_0x5500a8['querySelector']('.heart-icon');_0x376b0b['textContent']='...',_0xb3bd2c['textContent']='ðŸ¤';try{const _0x309590=await loadLikes(_0x5ea81f),_0x5983fe=_0x309590['users']['includes'](userId);_0x376b0b['textContent']=_0x309590['count']??0x0,_0xb3bd2c['textContent']=_0x5983fe?'â¤ï¸':'ðŸ¤',_0x5500a8['classList']['toggle']('liked',_0x5983fe);}catch{_0x376b0b['textContent']='0',_0xb3bd2c['textContent']='ðŸ¤',_0x5500a8['classList']['remove']('liked');}}function updateButtons(){const _0x51839f=document['getElementById']('prevBtn'),_0x5f68de=document['getElementById']('nextBtn');_0x51839f['disabled']=index===0x0,_0x5f68de['disabled']=index===photos['length']-0x1;}async function loadPhotos(){try{const _0x48ce14=await fetch(API_URL+'/list',{'cache':'no-store'});if(!_0x48ce14['ok'])return;const _0xba1480=await _0x48ce14['json']();if(!Array['isArray'](_0xba1480))return;photos=_0xba1480['sort']((_0x44a79b,_0x1a4bd9)=>{const _0x428eeb=parseInt(_0x44a79b['match'](/(\d+)/)?.[0x0])||0x0,_0x21b747=parseInt(_0x1a4bd9['match'](/(\d+)/)?.[0x0])||0x0;return _0x428eeb-_0x21b747;});if(!photos['length']){document['getElementById']('photoNumber')['textContent']='#0\x20/\x200';return;}index=photos['length']-0x1,render(index);}catch(_0x36eb5d){console['error']('FotoÄŸraf\x20listesi\x20alÄ±namadÄ±:',_0x36eb5d);}}async function render(_0x5a07bb){if(!photos['length'])return;if(_0x5a07bb<0x0)_0x5a07bb=0x0;if(_0x5a07bb>=photos['length'])_0x5a07bb=photos['length']-0x1;index=_0x5a07bb,mainPhotoEl['style']['transform']='translateX(0)';const _0x2e5351=photos[index],_0x604720=DIR+'/'+_0x2e5351;mainPhotoEl['src']=_0x604720,mainPhotoEl['alt']=_0x2e5351,document['getElementById']('photoNumber')['textContent']='#'+(index+0x1)+'\x20/\x20'+photos['length'];const _0x3a7f91=document['getElementById']('likeBtn');_0x3a7f91['disabled']=!![],await updateLikeButton(_0x2e5351),_0x3a7f91['disabled']=![];const _0x1a27a2=document['getElementById']('downloadBtn');_0x1a27a2['href']=_0x604720,_0x1a27a2['download']=_0x2e5351,updateButtons();}document['getElementById']('prevBtn')['addEventListener']('click',()=>render(index-0x1)),document['getElementById']('nextBtn')['addEventListener']('click',()=>render(index+0x1)),document['getElementById']('randBtn')['addEventListener']('click',()=>{if(!photos['length'])return;let _0x1e3ad1;do{_0x1e3ad1=rndm(0x0,photos['length']-0x1);}while(_0x1e3ad1===index&&photos['length']>0x1);render(_0x1e3ad1);});async function handleLike(_0x2d7ccc){_0x2d7ccc&&(_0x2d7ccc['preventDefault'](),_0x2d7ccc['stopPropagation']());if(!photos['length'])return;const _0x5e2a87=photos[index],_0x119ab1=document['getElementById']('likeBtn'),_0x325141=_0x119ab1['querySelector']('.heart-icon');if(_0x119ab1['disabled'])return;_0x119ab1['disabled']=!![];try{const _0x37d0a0=await toggleLike(_0x5e2a87);document['getElementById']('likeCount')['textContent']=_0x37d0a0['count']??0x0,_0x325141['textContent']=_0x37d0a0['hasLiked']?'â¤ï¸':'ðŸ¤',_0x119ab1['classList']['toggle']('liked',_0x37d0a0['hasLiked']),_0x37d0a0['hasLiked']&&(_0x325141['classList']['add']('heart-pop'),createHeartBurst(_0x119ab1),setTimeout(()=>_0x325141['classList']['remove']('heart-pop'),0x190));}catch(_0x2104a2){console['error']('BeÄŸeni\x20hatasÄ±:',_0x2104a2);}finally{_0x119ab1['disabled']=![];}}const likeBtnEl=document['getElementById']('likeBtn');likeBtnEl['addEventListener']('click',handleLike),likeBtnEl['addEventListener']('touchend',handleLike),likeBtnEl['style']['touchAction']='manipulation';function createHeartBurst(_0x56e9cb){const _0x2fc8e5=_0x56e9cb['getBoundingClientRect'](),_0x466715=_0x2fc8e5['left']+_0x2fc8e5['width']/0x2,_0x326999=_0x2fc8e5['top']+_0x2fc8e5['height']/0x2,_0x395ad4=[{'x':-0x1e,'y':-0x32},{'x':0x1e,'y':-0x32},{'x':-0x32,'y':-0x14},{'x':0x32,'y':-0x14},{'x':0x0,'y':-0x3c},{'x':-0x28,'y':0xa},{'x':0x28,'y':0xa},{'x':0x0,'y':0x1e}];_0x395ad4['forEach']((_0x4b1e86,_0x129b6a)=>{const _0xd4741f=document['createElement']('span');_0xd4741f['textContent']='â¤ï¸',_0xd4741f['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20left:\x20'+_0x466715+'px;\x0a\x20\x20\x20\x20\x20\x20top:\x20'+_0x326999+'px;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20transition:\x20all\x200.5s\x20ease-out;\x0a\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0xd4741f),requestAnimationFrame(()=>{requestAnimationFrame(()=>{_0xd4741f['style']['transform']='translate(calc(-50%\x20+\x20'+_0x4b1e86['x']+'px),\x20calc(-50%\x20+\x20'+_0x4b1e86['y']+'px))\x20scale(0.5)',_0xd4741f['style']['opacity']='0';});}),setTimeout(()=>_0xd4741f['remove'](),0x1f4);});}const lightbox=document['getElementById']('lightbox'),lbImg=document['getElementById']('lbImg'),lbClose=document['getElementById']('lbClose'),lbBackdrop=document['getElementById']('lbBackdrop'),openLightboxBtn=document['getElementById']('openLightbox');openLightboxBtn['addEventListener']('click',()=>{if(!photos['length'])return;lbImg['src']=DIR+'/'+photos[index],lightbox['setAttribute']('aria-hidden','false');}),lbClose['addEventListener']('click',()=>lightbox['setAttribute']('aria-hidden','true')),lbBackdrop['addEventListener']('click',()=>lightbox['setAttribute']('aria-hidden','true')),document['addEventListener']('keydown',_0x152862=>{_0x152862['key']==='Escape'&&(lightbox['setAttribute']('aria-hidden','true'),sideMenu['classList']['remove']('open'),menuOverlay['classList']['remove']('active'));if(_0x152862['key']==='ArrowLeft')render(index-0x1);if(_0x152862['key']==='ArrowRight')render(index+0x1);});const drunkToggle=document['getElementById']('drunkToggle');if(drunkToggle){const saved=localStorage['getItem']('drunkMode'),isOn=saved==='true';drunkToggle['checked']=isOn,document['body']['classList']['toggle']('sober',!isOn),drunkToggle['addEventListener']('change',()=>{const _0x3a0a49=drunkToggle['checked'];localStorage['setItem']('drunkMode',String(_0x3a0a49)),document['body']['classList']['toggle']('sober',!_0x3a0a49);});}const menuBtn=document['getElementById']('menuBtn'),sideMenu=document['getElementById']('sideMenu'),menuOverlay=document['getElementById']('menuOverlay');menuBtn&&sideMenu&&menuOverlay&&(menuBtn['addEventListener']('click',()=>{sideMenu['classList']['toggle']('open'),menuOverlay['classList']['toggle']('active');}),menuOverlay['addEventListener']('click',()=>{sideMenu['classList']['remove']('open'),menuOverlay['classList']['remove']('active');})),(loadPhotos(),function initAgeVerification(){const _0x28f605=document['getElementById']('ageVerification'),_0x16b8c8=document['getElementById']('ageYes'),_0x412f3f=document['getElementById']('ageNo');if(!_0x28f605||!_0x16b8c8||!_0x412f3f)return;function _0x2248ab(_0x1afdb6){_0x1afdb6&&(_0x1afdb6['preventDefault'](),_0x1afdb6['stopPropagation']()),_0x28f605['classList']['add']('hidden'),document['body']['style']['overflow']='';}function _0x42dda5(_0x40e3a7){_0x40e3a7&&(_0x40e3a7['preventDefault'](),_0x40e3a7['stopPropagation']()),window['location']['href']='https://www.google.com';}document['body']['style']['overflow']='hidden',_0x16b8c8['addEventListener']('click',_0x2248ab),_0x16b8c8['addEventListener']('touchend',_0x2248ab),_0x412f3f['addEventListener']('click',_0x42dda5),_0x412f3f['addEventListener']('touchend',_0x42dda5),_0x16b8c8['style']['touchAction']='manipulation',_0x412f3f['style']['touchAction']='manipulation';}());