const API_URL='',DIR=API_URL+'/images/watermarked';let photos=[],index=0x0;const photoWrap=document['getElementById']('photoWrap'),mainPhotoEl=document['getElementById']('mainPhoto');function rndm(_0x560eec,_0x19681f){return Math['floor'](Math['random']()*(_0x19681f-_0x560eec+0x1))+_0x560eec;}let userId=localStorage['getItem']('turkalkol_userId');!userId&&(userId='user_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9)+Date['now'](),localStorage['setItem']('turkalkol_userId',userId));let startX=0x0,currentX=0x0,dragging=![];const threshold=0x46,followRate=0.35;function swipeStart(_0x34cb82){if(!photos['length']||!mainPhotoEl)return;dragging=!![],startX=_0x34cb82,currentX=_0x34cb82,mainPhotoEl['style']['transition']='none';}function swipeMove(_0x2ef1c9){if(!dragging||!mainPhotoEl)return;currentX=_0x2ef1c9;const _0x1ea714=currentX-startX;mainPhotoEl['style']['transform']='translateX('+_0x1ea714*followRate+'px)';}function swipeEnd(){if(!dragging)return;dragging=![];const _0x152bd8=currentX-startX;if(_0x152bd8<-threshold&&index<photos['length']-0x1)render(index+0x1);else _0x152bd8>threshold&&index>0x0&&render(index-0x1);mainPhotoEl['style']['transition']='transform\x200.2s\x20ease',mainPhotoEl['style']['transform']='translateX(0)';}photoWrap['addEventListener']('touchstart',_0x424bea=>swipeStart(_0x424bea['touches'][0x0]['clientX'])),photoWrap['addEventListener']('touchmove',_0x545d20=>swipeMove(_0x545d20['touches'][0x0]['clientX'])),photoWrap['addEventListener']('touchend',swipeEnd),photoWrap['addEventListener']('mousedown',_0x4db372=>swipeStart(_0x4db372['clientX'])),photoWrap['addEventListener']('mousemove',_0x5bd7f8=>swipeMove(_0x5bd7f8['clientX'])),photoWrap['addEventListener']('mouseup',swipeEnd),photoWrap['addEventListener']('mouseleave',swipeEnd);async function loadLikes(_0x5e84a8,_0x5d2652=0x2){for(let _0x11f694=0x0;_0x11f694<=_0x5d2652;_0x11f694++){try{const _0x5deaa0=await fetch(API_URL+'/likes/'+_0x5e84a8,{'cache':'no-store','headers':{'Cache-Control':'no-cache'}});if(!_0x5deaa0['ok'])return{'count':0x0,'users':[]};const _0x14cc1e=await _0x5deaa0['json']();return _0x14cc1e;}catch(_0x1c66c9){if(_0x11f694===_0x5d2652)return console['error']('Like\x20yÃ¼kleme\x20hatasÄ±:',_0x1c66c9),{'count':0x0,'users':[]};await new Promise(_0x569bcc=>setTimeout(_0x569bcc,0x1f4));}}return{'count':0x0,'users':[]};}async function toggleLike(_0x184fe6){const _0x5b61ef=await fetch(API_URL+'/like/'+_0x184fe6,{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'userId':userId})});if(!_0x5b61ef['ok'])throw new Error('BeÄŸeni\x20gÃ¶nderilemedi');return await _0x5b61ef['json']();}async function updateLikeButton(_0x1d6d2f){const _0x1a0421=document['getElementById']('likeBtn'),_0x1e3a28=document['getElementById']('likeCount'),_0x62acc0=_0x1a0421['querySelector']('.heart-icon');_0x1e3a28['textContent']='...',_0x62acc0['textContent']='ðŸ¤';try{const _0x1e490f=await loadLikes(_0x1d6d2f),_0x577a7f=_0x1e490f['users']['includes'](userId);_0x1e3a28['textContent']=_0x1e490f['count']??0x0,_0x62acc0['textContent']=_0x577a7f?'â¤ï¸':'ðŸ¤',_0x1a0421['classList']['toggle']('liked',_0x577a7f);}catch{_0x1e3a28['textContent']='0',_0x62acc0['textContent']='ðŸ¤',_0x1a0421['classList']['remove']('liked');}}function updateButtons(){const _0x4dc770=document['getElementById']('prevBtn'),_0x3deb70=document['getElementById']('nextBtn');_0x4dc770['disabled']=index===0x0,_0x3deb70['disabled']=index===photos['length']-0x1;}async function loadPhotos(){try{const _0xfe35f7=await fetch(API_URL+'/list',{'cache':'no-store'});if(!_0xfe35f7['ok'])return;const _0x49f73f=await _0xfe35f7['json']();if(!Array['isArray'](_0x49f73f))return;photos=_0x49f73f['sort']((_0x42b55a,_0x173faf)=>{const _0x4e3ff0=parseInt(_0x42b55a['match'](/(\d+)/)?.[0x0])||0x0,_0x579e29=parseInt(_0x173faf['match'](/(\d+)/)?.[0x0])||0x0;return _0x4e3ff0-_0x579e29;});if(!photos['length']){document['getElementById']('photoNumber')['textContent']='#0\x20/\x200';return;}index=photos['length']-0x1,render(index);}catch(_0x5567b4){console['error']('FotoÄŸraf\x20listesi\x20alÄ±namadÄ±:',_0x5567b4);}}async function render(_0x2d076f){if(!photos['length'])return;if(_0x2d076f<0x0)_0x2d076f=0x0;if(_0x2d076f>=photos['length'])_0x2d076f=photos['length']-0x1;index=_0x2d076f,mainPhotoEl['style']['transform']='translateX(0)';const _0x1c0aac=photos[index],_0x38cbca=DIR+'/'+_0x1c0aac;mainPhotoEl['src']=_0x38cbca,mainPhotoEl['alt']=_0x1c0aac,document['getElementById']('photoNumber')['textContent']='#'+(index+0x1)+'\x20/\x20'+photos['length'];const _0x4f7d40=document['getElementById']('likeBtn');_0x4f7d40['disabled']=!![],await updateLikeButton(_0x1c0aac),_0x4f7d40['disabled']=![];const _0xe2cd4b=document['getElementById']('downloadBtn');_0xe2cd4b['href']=_0x38cbca,_0xe2cd4b['download']=_0x1c0aac,updateButtons();}document['getElementById']('prevBtn')['addEventListener']('click',()=>render(index-0x1)),document['getElementById']('nextBtn')['addEventListener']('click',()=>render(index+0x1)),document['getElementById']('randBtn')['addEventListener']('click',()=>{if(!photos['length'])return;let _0x3d9a3b;do{_0x3d9a3b=rndm(0x0,photos['length']-0x1);}while(_0x3d9a3b===index&&photos['length']>0x1);render(_0x3d9a3b);});async function handleLike(_0x514ada){_0x514ada&&(_0x514ada['preventDefault'](),_0x514ada['stopPropagation']());if(!photos['length'])return;const _0x1b36e6=photos[index],_0x1b916b=document['getElementById']('likeBtn'),_0x1242ec=_0x1b916b['querySelector']('.heart-icon');if(_0x1b916b['disabled'])return;_0x1b916b['disabled']=!![];try{const _0x3b7002=await toggleLike(_0x1b36e6);document['getElementById']('likeCount')['textContent']=_0x3b7002['count']??0x0,_0x1242ec['textContent']=_0x3b7002['hasLiked']?'â¤ï¸':'ðŸ¤',_0x1b916b['classList']['toggle']('liked',_0x3b7002['hasLiked']),_0x3b7002['hasLiked']&&(_0x1242ec['classList']['add']('heart-pop'),createHeartBurst(_0x1b916b),setTimeout(()=>_0x1242ec['classList']['remove']('heart-pop'),0x190));}catch(_0x2ca662){console['error']('BeÄŸeni\x20hatasÄ±:',_0x2ca662);}finally{_0x1b916b['disabled']=![];}}const likeBtnEl=document['getElementById']('likeBtn');likeBtnEl['addEventListener']('click',handleLike),likeBtnEl['addEventListener']('touchend',handleLike),likeBtnEl['style']['touchAction']='manipulation';function createHeartBurst(_0x4b1817){const _0x1e31b0=_0x4b1817['getBoundingClientRect'](),_0x191488=_0x1e31b0['left']+_0x1e31b0['width']/0x2,_0x341a53=_0x1e31b0['top']+_0x1e31b0['height']/0x2,_0x9df96d=[{'x':-0x1e,'y':-0x32},{'x':0x1e,'y':-0x32},{'x':-0x32,'y':-0x14},{'x':0x32,'y':-0x14},{'x':0x0,'y':-0x3c},{'x':-0x28,'y':0xa},{'x':0x28,'y':0xa},{'x':0x0,'y':0x1e}];_0x9df96d['forEach']((_0x4f2f21,_0x2743e5)=>{const _0x4c98a2=document['createElement']('span');_0x4c98a2['textContent']='â¤ï¸',_0x4c98a2['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20left:\x20'+_0x191488+'px;\x0a\x20\x20\x20\x20\x20\x20top:\x20'+_0x341a53+'px;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20transition:\x20all\x200.5s\x20ease-out;\x0a\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x4c98a2),requestAnimationFrame(()=>{requestAnimationFrame(()=>{_0x4c98a2['style']['transform']='translate(calc(-50%\x20+\x20'+_0x4f2f21['x']+'px),\x20calc(-50%\x20+\x20'+_0x4f2f21['y']+'px))\x20scale(0.5)',_0x4c98a2['style']['opacity']='0';});}),setTimeout(()=>_0x4c98a2['remove'](),0x1f4);});}const lightbox=document['getElementById']('lightbox'),lbImg=document['getElementById']('lbImg'),lbClose=document['getElementById']('lbClose'),lbBackdrop=document['getElementById']('lbBackdrop'),openLightboxBtn=document['getElementById']('openLightbox');openLightboxBtn['addEventListener']('click',()=>{if(!photos['length'])return;lbImg['src']=DIR+'/'+photos[index],lightbox['setAttribute']('aria-hidden','false');}),lbClose['addEventListener']('click',()=>lightbox['setAttribute']('aria-hidden','true')),lbBackdrop['addEventListener']('click',()=>lightbox['setAttribute']('aria-hidden','true')),document['addEventListener']('keydown',_0x466933=>{_0x466933['key']==='Escape'&&(lightbox['setAttribute']('aria-hidden','true'),sideMenu['classList']['remove']('open'),menuOverlay['classList']['remove']('active'));if(_0x466933['key']==='ArrowLeft')render(index-0x1);if(_0x466933['key']==='ArrowRight')render(index+0x1);});const drunkToggle=document['getElementById']('drunkToggle');if(drunkToggle){const saved=localStorage['getItem']('drunkMode'),isOn=saved==='true';drunkToggle['checked']=isOn,document['body']['classList']['toggle']('sober',!isOn),drunkToggle['addEventListener']('change',()=>{const _0x392d6a=drunkToggle['checked'];localStorage['setItem']('drunkMode',String(_0x392d6a)),document['body']['classList']['toggle']('sober',!_0x392d6a);});}const menuBtn=document['getElementById']('menuBtn'),sideMenu=document['getElementById']('sideMenu'),menuOverlay=document['getElementById']('menuOverlay');menuBtn&&sideMenu&&menuOverlay&&(menuBtn['addEventListener']('click',()=>{sideMenu['classList']['toggle']('open'),menuOverlay['classList']['toggle']('active');}),menuOverlay['addEventListener']('click',()=>{sideMenu['classList']['remove']('open'),menuOverlay['classList']['remove']('active');}));loadPhotos(),function initAgeVerification(){const _0x49dae=document['getElementById']('ageVerification'),_0x5c0334=document['getElementById']('ageYes'),_0x13a291=document['getElementById']('ageNo');if(!_0x49dae||!_0x5c0334||!_0x13a291)return;function _0x1ec5ca(_0x3464f0){_0x3464f0&&(_0x3464f0['preventDefault'](),_0x3464f0['stopPropagation']()),_0x49dae['classList']['add']('hidden'),document['body']['style']['overflow']='';}function _0x956b06(_0x4f414e){_0x4f414e&&(_0x4f414e['preventDefault'](),_0x4f414e['stopPropagation']()),window['location']['href']='https://www.google.com';}document['body']['style']['overflow']='hidden',_0x5c0334['addEventListener']('click',_0x1ec5ca),_0x5c0334['addEventListener']('touchend',_0x1ec5ca),_0x13a291['addEventListener']('click',_0x956b06),_0x13a291['addEventListener']('touchend',_0x956b06),_0x5c0334['style']['touchAction']='manipulation',_0x13a291['style']['touchAction']='manipulation';}();