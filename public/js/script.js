const API_URL='',DIR=API_URL+'/images/watermarked';let photos=[],index=0x0;const photoWrap=document['getElementById']('photoWrap'),mainPhotoEl=document['getElementById']('mainPhoto');function rndm(_0x52a5d8,_0x5a9625){return Math['floor'](Math['random']()*(_0x5a9625-_0x52a5d8+0x1))+_0x52a5d8;}let userId=localStorage['getItem']('turkalkol_userId');!userId&&(userId='user_'+Math['random']()['toString'](0x24)['substr'](0x2,0x9)+Date['now'](),localStorage['setItem']('turkalkol_userId',userId));let startX=0x0,currentX=0x0,dragging=![];const threshold=0x46,followRate=0.35;function swipeStart(_0xf0a130){if(!photos['length']||!mainPhotoEl)return;dragging=!![],startX=_0xf0a130,currentX=_0xf0a130,mainPhotoEl['style']['transition']='none';}function swipeMove(_0x594513){if(!dragging||!mainPhotoEl)return;currentX=_0x594513;const _0x1640aa=currentX-startX;mainPhotoEl['style']['transform']='translateX('+_0x1640aa*followRate+'px)';}function swipeEnd(){if(!dragging)return;dragging=![];const _0x20ecfd=currentX-startX;if(_0x20ecfd<-threshold&&index<photos['length']-0x1)render(index+0x1);else _0x20ecfd>threshold&&index>0x0&&render(index-0x1);mainPhotoEl['style']['transition']='transform\x200.2s\x20ease',mainPhotoEl['style']['transform']='translateX(0)';}photoWrap['addEventListener']('touchstart',_0x33512a=>swipeStart(_0x33512a['touches'][0x0]['clientX'])),photoWrap['addEventListener']('touchmove',_0x564f27=>swipeMove(_0x564f27['touches'][0x0]['clientX'])),photoWrap['addEventListener']('touchend',swipeEnd),photoWrap['addEventListener']('mousedown',_0x309898=>swipeStart(_0x309898['clientX'])),photoWrap['addEventListener']('mousemove',_0x2be343=>swipeMove(_0x2be343['clientX'])),photoWrap['addEventListener']('mouseup',swipeEnd),photoWrap['addEventListener']('mouseleave',swipeEnd);async function loadLikes(_0x575caa,_0x2c417a=0x2){for(let _0x1d1e0c=0x0;_0x1d1e0c<=_0x2c417a;_0x1d1e0c++){try{const _0x28b1ba=await fetch(API_URL+'/likes/'+_0x575caa,{'cache':'no-store','headers':{'Cache-Control':'no-cache'}});if(!_0x28b1ba['ok'])return{'count':0x0,'users':[]};const _0x7306=await _0x28b1ba['json']();return _0x7306;}catch(_0x210dbe){if(_0x1d1e0c===_0x2c417a)return console['error']('Like\x20yÃ¼kleme\x20hatasÄ±:',_0x210dbe),{'count':0x0,'users':[]};await new Promise(_0x3101c5=>setTimeout(_0x3101c5,0x1f4));}}return{'count':0x0,'users':[]};}async function toggleLike(_0x300cae){const _0x3524cc=await fetch(API_URL+'/like/'+_0x300cae,{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'userId':userId})});if(!_0x3524cc['ok'])throw new Error('BeÄŸeni\x20gÃ¶nderilemedi');return await _0x3524cc['json']();}async function updateLikeButton(_0x1a06b5){const _0x2215e1=document['getElementById']('likeBtn'),_0x13972b=document['getElementById']('likeCount'),_0x28f534=_0x2215e1['querySelector']('.heart-icon');_0x13972b['textContent']='...',_0x28f534['textContent']='ðŸ¤';try{const _0x503e7c=await loadLikes(_0x1a06b5),_0x4df7a8=_0x503e7c['users']['includes'](userId);_0x13972b['textContent']=_0x503e7c['count']??0x0,_0x28f534['textContent']=_0x4df7a8?'â¤ï¸':'ðŸ¤',_0x2215e1['classList']['toggle']('liked',_0x4df7a8);}catch{_0x13972b['textContent']='0',_0x28f534['textContent']='ðŸ¤',_0x2215e1['classList']['remove']('liked');}}function updateButtons(){const _0x4e8fb4=document['getElementById']('prevBtn'),_0xb2ba8e=document['getElementById']('nextBtn');_0x4e8fb4['disabled']=index===0x0,_0xb2ba8e['disabled']=index===photos['length']-0x1;}async function loadPhotos(){try{const _0x4eeb6d=await fetch(API_URL+'/list',{'cache':'no-store'});if(!_0x4eeb6d['ok'])return;const _0x742ff8=await _0x4eeb6d['json']();if(!Array['isArray'](_0x742ff8))return;photos=_0x742ff8['sort']((_0x4e2546,_0x12e940)=>{const _0x3a456b=parseInt(_0x4e2546['match'](/(\d+)/)?.[0x0])||0x0,_0x343ad7=parseInt(_0x12e940['match'](/(\d+)/)?.[0x0])||0x0;return _0x3a456b-_0x343ad7;});if(!photos['length']){document['getElementById']('photoNumber')['textContent']='#0\x20/\x200';return;}index=photos['length']-0x1,render(index);}catch(_0x50565e){console['error']('FotoÄŸraf\x20listesi\x20alÄ±namadÄ±:',_0x50565e);}}async function render(_0x438b90){if(!photos['length'])return;if(_0x438b90<0x0)_0x438b90=0x0;if(_0x438b90>=photos['length'])_0x438b90=photos['length']-0x1;index=_0x438b90,mainPhotoEl['style']['transform']='translateX(0)';const _0x54c7f8=photos[index],_0x1b3341=DIR+'/'+_0x54c7f8;mainPhotoEl['src']=_0x1b3341,mainPhotoEl['alt']=_0x54c7f8,document['getElementById']('photoNumber')['textContent']='#'+(index+0x1)+'\x20/\x20'+photos['length'];const _0x44e26f=document['getElementById']('likeBtn');_0x44e26f['disabled']=!![],await updateLikeButton(_0x54c7f8),_0x44e26f['disabled']=![];const _0x54b2d3=document['getElementById']('downloadBtn');_0x54b2d3['href']=_0x1b3341,_0x54b2d3['download']=_0x54c7f8,updateButtons();}document['getElementById']('prevBtn')['addEventListener']('click',()=>render(index-0x1)),document['getElementById']('nextBtn')['addEventListener']('click',()=>render(index+0x1)),document['getElementById']('randBtn')['addEventListener']('click',()=>{if(!photos['length'])return;let _0x8822dc;do{_0x8822dc=rndm(0x0,photos['length']-0x1);}while(_0x8822dc===index&&photos['length']>0x1);render(_0x8822dc);});async function handleLike(_0x4b5440){_0x4b5440&&(_0x4b5440['preventDefault'](),_0x4b5440['stopPropagation']());if(!photos['length'])return;const _0x25b8d8=photos[index],_0x3c8539=document['getElementById']('likeBtn'),_0x1ce85e=_0x3c8539['querySelector']('.heart-icon');if(_0x3c8539['disabled'])return;_0x3c8539['disabled']=!![];try{const _0x272ebd=await toggleLike(_0x25b8d8);document['getElementById']('likeCount')['textContent']=_0x272ebd['count']??0x0,_0x1ce85e['textContent']=_0x272ebd['hasLiked']?'â¤ï¸':'ðŸ¤',_0x3c8539['classList']['toggle']('liked',_0x272ebd['hasLiked']),_0x272ebd['hasLiked']&&(_0x1ce85e['classList']['add']('heart-pop'),createHeartBurst(_0x3c8539),setTimeout(()=>_0x1ce85e['classList']['remove']('heart-pop'),0x190));}catch(_0x3d1ce3){console['error']('BeÄŸeni\x20hatasÄ±:',_0x3d1ce3);}finally{_0x3c8539['disabled']=![];}}const likeBtnEl=document['getElementById']('likeBtn');likeBtnEl['addEventListener']('click',handleLike),likeBtnEl['addEventListener']('touchend',handleLike),likeBtnEl['style']['touchAction']='manipulation';function createHeartBurst(_0xb23e9e){const _0x159677=_0xb23e9e['getBoundingClientRect'](),_0x594713=_0x159677['left']+_0x159677['width']/0x2,_0x2df577=_0x159677['top']+_0x159677['height']/0x2,_0x2e1957=[{'x':-0x1e,'y':-0x32},{'x':0x1e,'y':-0x32},{'x':-0x32,'y':-0x14},{'x':0x32,'y':-0x14},{'x':0x0,'y':-0x3c},{'x':-0x28,'y':0xa},{'x':0x28,'y':0xa},{'x':0x0,'y':0x1e}];_0x2e1957['forEach']((_0x3d4a79,_0x579f9b)=>{const _0x536936=document['createElement']('span');_0x536936['textContent']='â¤ï¸',_0x536936['style']['cssText']='\x0a\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20left:\x20'+_0x594713+'px;\x0a\x20\x20\x20\x20\x20\x20top:\x20'+_0x2df577+'px;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20transform:\x20translate(-50%,\x20-50%);\x0a\x20\x20\x20\x20\x20\x20transition:\x20all\x200.5s\x20ease-out;\x0a\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x536936),requestAnimationFrame(()=>{requestAnimationFrame(()=>{_0x536936['style']['transform']='translate(calc(-50%\x20+\x20'+_0x3d4a79['x']+'px),\x20calc(-50%\x20+\x20'+_0x3d4a79['y']+'px))\x20scale(0.5)',_0x536936['style']['opacity']='0';});}),setTimeout(()=>_0x536936['remove'](),0x1f4);});}const lightbox=document['getElementById']('lightbox'),lbImg=document['getElementById']('lbImg'),lbClose=document['getElementById']('lbClose'),lbBackdrop=document['getElementById']('lbBackdrop'),openLightboxBtn=document['getElementById']('openLightbox');openLightboxBtn['addEventListener']('click',()=>{if(!photos['length'])return;lbImg['src']=DIR+'/'+photos[index],lightbox['setAttribute']('aria-hidden','false');}),lbClose['addEventListener']('click',()=>lightbox['setAttribute']('aria-hidden','true')),lbBackdrop['addEventListener']('click',()=>lightbox['setAttribute']('aria-hidden','true')),document['addEventListener']('keydown',_0x199511=>{_0x199511['key']==='Escape'&&(lightbox['setAttribute']('aria-hidden','true'),sideMenu['classList']['remove']('open'),menuOverlay['classList']['remove']('active'));if(_0x199511['key']==='ArrowLeft')render(index-0x1);if(_0x199511['key']==='ArrowRight')render(index+0x1);});const drunkToggle=document['getElementById']('drunkToggle');if(drunkToggle){const saved=localStorage['getItem']('drunkMode'),isOn=saved==='true';drunkToggle['checked']=isOn,document['body']['classList']['toggle']('sober',!isOn),drunkToggle['addEventListener']('change',()=>{const _0x878709=drunkToggle['checked'];localStorage['setItem']('drunkMode',String(_0x878709)),document['body']['classList']['toggle']('sober',!_0x878709);});}const menuBtn=document['getElementById']('menuBtn'),sideMenu=document['getElementById']('sideMenu'),menuOverlay=document['getElementById']('menuOverlay');menuBtn&&sideMenu&&menuOverlay&&(menuBtn['addEventListener']('click',()=>{sideMenu['classList']['toggle']('open'),menuOverlay['classList']['toggle']('active');}),menuOverlay['addEventListener']('click',()=>{sideMenu['classList']['remove']('open'),menuOverlay['classList']['remove']('active');})),(loadPhotos(),function initAgeVerification(){const _0x5d5324=document['getElementById']('ageVerification'),_0x46600f=document['getElementById']('ageYes'),_0xb53c3c=document['getElementById']('ageNo');if(!_0x5d5324||!_0x46600f||!_0xb53c3c)return;function _0x4b2eac(_0x424c01){_0x424c01&&(_0x424c01['preventDefault'](),_0x424c01['stopPropagation']()),_0x5d5324['classList']['add']('hidden'),document['body']['style']['overflow']='';}function _0x47e8da(_0x5365a7){_0x5365a7&&(_0x5365a7['preventDefault'](),_0x5365a7['stopPropagation']()),window['location']['href']='https://www.google.com';}document['body']['style']['overflow']='hidden',_0x46600f['addEventListener']('click',_0x4b2eac),_0x46600f['addEventListener']('touchend',_0x4b2eac),_0xb53c3c['addEventListener']('click',_0x47e8da),_0xb53c3c['addEventListener']('touchend',_0x47e8da),_0x46600f['style']['touchAction']='manipulation',_0xb53c3c['style']['touchAction']='manipulation';}());