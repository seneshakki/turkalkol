const canvas=document['getElementById']('gameCanvas'),ctx=canvas['getContext']('2d'),ITEMS={'shotGlass':{'name':'Shot\x20Bardak','type':'glass','h':0x78,'w':0x46,'topW':0x46,'bottomW':0x32,'image':'/images/bottles/shot/jagermeister.png','fill':'#c9a227','opacity':0.6,'mass':0.4,'centerOfMass':0.7},'beerGlass':{'name':'Bira\x20BardaÄŸÄ±','type':'glass','h':0xa0,'w':0x50,'topW':0x50,'bottomW':0x41,'image':'/images/bottles/bira/efes.png','fill':'#f5b800','opacity':0.5,'mass':0.6,'centerOfMass':0.65},'wineGlass':{'name':'Åžarap\x20Kadehi','type':'glass','h':0xaa,'w':0x50,'topW':0x4b,'bottomW':0x28,'image':'/images/bottles/sarap/kavaklidere.png','fill':'#722F37','opacity':0.4,'mass':0.5,'centerOfMass':0.55},'whiskyGlass':{'name':'Viski\x20BardaÄŸÄ±','type':'glass','h':0x8c,'w':0x50,'topW':0x50,'bottomW':0x46,'image':'/images/bottles/viski/jack-daniels.png','fill':'#d4a574','opacity':0.5,'mass':0.7,'centerOfMass':0.75},'rakiBottle':{'name':'RakÄ±\x20ÅžiÅŸesi','type':'bottle','h':0xc8,'w':0x46,'neckH':0x32,'neckW':0x16,'image':'/images/bottles/raki/yeni-raki.png','fill':'#ffffff','opacity':0.3,'mass':0x1,'centerOfMass':0.6},'vodkaBottle':{'name':'Votka\x20ÅžiÅŸesi','type':'bottle','h':0xc8,'w':0x46,'neckH':0x3c,'neckW':0x19,'image':'/images/bottles/vodka/istanblue.png','fill':'#e0e0e0','opacity':0.25,'mass':1.1,'centerOfMass':0.55}},SURFACES={'rakiTable':{'name':'RakÄ±\x20MasasÄ±','image':'tables/raki_table.png','bounce':0.3,'friction':0.8},'beerTable':{'name':'Bira\x20MasasÄ±','image':'tables/beer_table.png','bounce':0.35,'friction':0.75},'woodBar':{'name':'AhÅŸap\x20Bar','image':'tables/wood_table.png','bounce':0.3,'friction':0.8},'glassTable':{'name':'Cam\x20Masa','color':'rgba(100,180,220,0.4)','highlight':'rgba(150,200,240,0.6)','bounce':0.25,'friction':0.5,'transparent':!![]}},PHYSICS={'gravity':0.35,'airDrag':0.997,'angularDrag':0.995,'minVelocity':0.5,'maxPower':0x64,'perfectLanding':0x8,'goodLanding':0x14,'okLanding':0x23},isMobile=/Android|iPhone|iPad|iPod|webOS|BlackBerry|IEMobile|Opera Mini/i['test'](navigator['userAgent'])||window['innerWidth']<0x300,PERF={'maxParticles':isMobile?0x6:0xf,'enableShadows':!isMobile,'enableGlow':!isMobile,'enableWoodGrain':!isMobile,'enableAmbientLight':!isMobile};let state={'screen':'menu','username':'','currentItem':'shotGlass','currentSurface':'woodBar','score':0x0,'combo':0x0,'bestCombo':0x0,'isFlipping':![],'isCharging':![],'power':0x0,'powerDir':1.5,'soundOn':!![],'particles':[]},obj={'x':0x0,'y':0x0,'vx':0x0,'vy':0x0,'angle':0x0,'angVel':0x0,'grounded':!![]};const $=_0x5ddb2a=>document['getElementById'](_0x5ddb2a),ui={'menuScreen':$('loginScreen'),'gameScreen':$('gameScreen'),'username':$('usernameInput'),'startBtn':$('startBtn'),'leaderboard':$('top5List'),'score':$('currentScore'),'combo':$('comboDisplay'),'message':$('messageOverlay'),'powerFill':$('powerFill'),'powerText':$('powerText'),'flipBtn':$('flipBtn'),'exitBtn':$('exitBtn'),'soundBtn':$('soundBtn'),'itemBtn':$('itemBtn'),'surfaceBtn':$('surfaceBtn')},tableImages={};function preloadTableImages(){Object['keys'](SURFACES)['forEach'](_0x4917b1=>{const _0x45749a=SURFACES[_0x4917b1];if(_0x45749a['image']){const _0x240e51=new Image();_0x240e51['src']=_0x45749a['image'],_0x240e51['onload']=()=>{tableImages[_0x4917b1]=_0x240e51;};}});}const itemImages={};function preloadItemImages(){Object['keys'](ITEMS)['forEach'](_0x24d02e=>{const _0x26e8ae=ITEMS[_0x24d02e];if(_0x26e8ae['image']){const _0x56eb58=new Image();_0x56eb58['src']=_0x26e8ae['image'],_0x56eb58['onload']=()=>{itemImages[_0x24d02e]=_0x56eb58,console['log']('Loaded:',_0x24d02e,_0x26e8ae['image']);},_0x56eb58['onerror']=()=>{console['warn']('Failed\x20to\x20load:',_0x26e8ae['image']);};}});}function init(){preloadTableImages(),preloadItemImages(),resize(),loadLeaderboard(),window['addEventListener']('resize',resize),ui['startBtn']?.['addEventListener']('click',startGame),ui['exitBtn']?.['addEventListener']('click',exitGame),ui['soundBtn']?.['addEventListener']('click',toggleSound),ui['itemBtn']?.['addEventListener']('click',cycleItem),ui['surfaceBtn']?.['addEventListener']('click',cycleSurface);if(ui['flipBtn']){ui['flipBtn']['addEventListener']('contextmenu',_0x5cdc11=>_0x5cdc11['preventDefault']());const _0xa89387=_0x5db8d2=>{state['screen']==='game'&&!state['isFlipping']&&obj['grounded']&&(_0x5db8d2['preventDefault'](),state['isCharging']=!![],state['power']=0x0,ui['flipBtn']['classList']['add']('pressing'));},_0x17268f=_0x4cd6dc=>{if(state['isCharging']){_0x4cd6dc['preventDefault'](),state['isCharging']=![],ui['flipBtn']['classList']['remove']('pressing');if(state['power']>0x5)doFlip();}};ui['flipBtn']['addEventListener']('mousedown',_0xa89387),ui['flipBtn']['addEventListener']('touchstart',_0xa89387,{'passive':![]}),window['addEventListener']('mouseup',_0x17268f),window['addEventListener']('touchend',_0x17268f);}requestAnimationFrame(gameLoop);}function resize(){canvas['width']=window['innerWidth'],canvas['height']=window['innerHeight'],resetObject();}function startGame(){const _0x52b236=ui['username']?.['value']['trim']()||'Oyuncu';if(_0x52b236['length']<0x2){showMessage('Ä°sim\x20Ã§ok\x20kÄ±sa!','#ef4444');return;}state['username']=_0x52b236,state['screen']='game',state['score']=0x0,state['combo']=0x0,ui['menuScreen']?.['classList']['remove']('active'),ui['gameScreen']?.['classList']['add']('active'),resetObject(),updateUI();}function exitGame(){if(state['score']>0x0)saveScore();state['screen']='menu',ui['menuScreen']?.['classList']['add']('active'),ui['gameScreen']?.['classList']['remove']('active'),loadLeaderboard();}function doFlip(){const _0x32edd8=ITEMS[state['currentItem']],_0x49087a=SURFACES[state['currentSurface']];state['isFlipping']=!![],obj['grounded']=![],state['flipStartTime']=Date['now'](),ui['flipBtn']['textContent']='ðŸ”„',ui['flipBtn']['disabled']=!![];const _0xb840cb=state['power']/PHYSICS['maxPower'],_0x380ea2=Math['sqrt'](0x1/_0x32edd8['mass']),_0x6ece66=0x1+_0x32edd8['h']/0x96*0.2,_0x196176=0x8+_0xb840cb*0xa;obj['vy']=-_0x196176*_0x380ea2*_0x6ece66;const _0x50d512=(0x1-_0xb840cb*0.5)*0x5;obj['vx']=(Math['random']()-0.5)*_0x50d512;const _0x4fa7e8=Math['random']()>0.5?0x1:-0x1,_0x2b0fe9=0x1+(_0x32edd8['centerOfMass']-0.5)*0.5,_0x5e7cf2=0.1+_0xb840cb*0.3;obj['angVel']=_0x5e7cf2*_0x380ea2*_0x2b0fe9*_0x4fa7e8,obj['wobble']=0.02,playSound('launch');}function updatePhysics(){if(state['isCharging']){state['power']+=state['powerDir']*0.7;if(state['power']>=PHYSICS['maxPower'])state['power']=PHYSICS['maxPower'],state['powerDir']=-Math['abs'](state['powerDir']);else state['power']<=0x0&&(state['power']=0x0,state['powerDir']=Math['abs'](state['powerDir']));updatePowerBar();}if(!state['isFlipping']){obj['grounded']&&obj['wobble']>0x0&&(obj['wobble']*=0.92,obj['angle']=Math['sin'](Date['now']()*0.01)*obj['wobble'],obj['wobble']<0.001&&(obj['wobble']=0x0,obj['angle']=0x0));return;}const _0x3a7395=ITEMS[state['currentItem']],_0x2df697=SURFACES[state['currentSurface']],_0x604a3b=0.9+_0x3a7395['mass']*0.2;obj['vy']+=PHYSICS['gravity']*_0x604a3b;const _0x56fc2a=PHYSICS['airDrag']+(_0x3a7395['mass']-0.5)*0.002;obj['vx']*=_0x56fc2a,obj['vy']*=Math['min'](0.999,_0x56fc2a);const _0x183bec=PHYSICS['angularDrag']-_0x3a7395['h']/0xc8*0.01;obj['angVel']*=_0x183bec;if(obj['vy']>0x0){const _0x2071c4=0.0005*(0x1-_0x3a7395['centerOfMass']);if(obj['angVel']>0x0)obj['angVel']-=_0x2071c4;else obj['angVel']+=_0x2071c4;}obj['x']+=obj['vx'],obj['y']+=obj['vy'],obj['angle']+=obj['angVel'];const _0x489c8c=_0x3a7395['w']/0x2;if(obj['x']-_0x489c8c<0x0)obj['x']=_0x489c8c,obj['vx']*=-0.4,obj['angVel']+=obj['vx']*0.02;else obj['x']+_0x489c8c>canvas['width']&&(obj['x']=canvas['width']-_0x489c8c,obj['vx']*=-0.4,obj['angVel']-=obj['vx']*0.02);const _0x12cf24=getFloorY();if(obj['y']>=_0x12cf24){obj['y']=_0x12cf24;const _0x169bdb=Math['abs'](obj['vy']),_0xa13c3a=Math['abs'](obj['angle']%(Math['PI']*0x2)*0xb4/Math['PI']),_0x573bc5=_0xa13c3a<0x1e||_0xa13c3a>0x14a;if(_0x169bdb>2.5){const _0x5bab13=_0x573bc5?0.5:1.2;obj['vy']*=-_0x2df697['bounce']*_0x5bab13,obj['vx']*=_0x2df697['friction'];if(!_0x573bc5){const _0xae2b7c=_0xa13c3a<0xb4?0x1:-0x1;obj['angVel']+=_0xae2b7c*_0x169bdb*0.008;}else obj['angVel']*=0.3;obj['angVel']*=_0x2df697['friction'],createImpactParticles(),playSound('bounce');}else _0x169bdb>PHYSICS['minVelocity']?(obj['vy']*=-_0x2df697['bounce']*0.3,obj['angVel']*=0.5):checkLanding();}updateParticles();}function checkLanding(){state['isFlipping']=![],obj['grounded']=!![],obj['vx']=0x0,obj['vy']=0x0,obj['angVel']=0x0,ui['flipBtn']['textContent']='BASILI\x20TUT',ui['flipBtn']['disabled']=![];let _0xc432b5=(obj['angle']*0xb4/Math['PI']%0x168+0x168)%0x168;if(_0xc432b5>0xb4)_0xc432b5=0x168-_0xc432b5;if(_0xc432b5<=PHYSICS['perfectLanding'])handleSuccess('perfect');else{if(_0xc432b5<=PHYSICS['goodLanding'])handleSuccess('good');else _0xc432b5<=PHYSICS['okLanding']?handleSuccess('ok'):handleFail();}}function handleSuccess(_0x54be1a){const _0x49d02d=_0x54be1a==='perfect'?0x3:_0x54be1a==='good'?0x2:0x1,_0x497228=_0x54be1a==='perfect'?'MÃœKEMMEL!':_0x54be1a==='good'?'GÃœZEL!':'OLDU!',_0x494b0e=_0x54be1a==='perfect'?'#22c55e':_0x54be1a==='good'?'#84cc16':'#eab308';state['score']+=_0x49d02d,state['combo']++;if(state['combo']>state['bestCombo'])state['bestCombo']=state['combo'];showMessage(state['combo']>0x1?state['combo']+'x\x20'+_0x497228:_0x497228,_0x494b0e),createSuccessParticles(),playSound('success'),obj['angle']=0x0,updateUI();if(state['score']%0x5===0x0)saveScore();}function handleFail(){state['combo']=0x0,showMessage('DÃœÅžTÃœ!','#ef4444'),playSound('fail');const _0x32e519=ITEMS[state['currentItem']];obj['angle']=Math['PI']/0x2,saveScore(),setTimeout(()=>{if(!state['isFlipping'])resetObject();},0x258);}function resetObject(){const _0x593d6b=ITEMS[state['currentItem']];obj['x']=canvas['width']/0x2,obj['y']=getFloorY(),obj['vx']=0x0,obj['vy']=0x0,obj['angle']=0x0,obj['angVel']=0x0,obj['grounded']=!![];}function getFloorY(){return canvas['height']-0x12c;}function createImpactParticles(){const _0xcb834f=Math['min'](PERF['maxParticles'],0x8);for(let _0x583495=0x0;_0x583495<_0xcb834f;_0x583495++){state['particles']['push']({'x':obj['x']+(Math['random']()-0.5)*0x1e,'y':getFloorY(),'vx':(Math['random']()-0.5)*0x6,'vy':-Math['random']()*0x4-0x2,'size':Math['random']()*0x4+0x2,'life':0x1,'color':'#ffffff'});}}function createSuccessParticles(){const _0x4f3b15=['#22c55e','#84cc16','#fbbf24','#ffffff'];for(let _0x111d2a=0x0;_0x111d2a<0xf;_0x111d2a++){const _0x39d922=_0x111d2a/0xf*Math['PI']*0x2;state['particles']['push']({'x':obj['x'],'y':obj['y'],'vx':Math['cos'](_0x39d922)*(Math['random']()*0x4+0x2),'vy':Math['sin'](_0x39d922)*(Math['random']()*0x4+0x2)-0x3,'size':Math['random']()*0x5+0x3,'life':0x1,'color':_0x4f3b15[Math['floor'](Math['random']()*_0x4f3b15['length'])]});}}function updateParticles(){for(let _0x474187=state['particles']['length']-0x1;_0x474187>=0x0;_0x474187--){const _0xa96ccd=state['particles'][_0x474187];_0xa96ccd['x']+=_0xa96ccd['vx'],_0xa96ccd['y']+=_0xa96ccd['vy'],_0xa96ccd['vy']+=0.15,_0xa96ccd['life']-=0.03;if(_0xa96ccd['life']<=0x0)state['particles']['splice'](_0x474187,0x1);}}function gameLoop(){updatePhysics(),render(),requestAnimationFrame(gameLoop);}function render(){ctx['clearRect'](0x0,0x0,canvas['width'],canvas['height']),drawBackground(),drawSurface(),drawObject(),drawParticles();}function drawBackground(){const _0x329fef=canvas['width'],_0x419f7f=canvas['height'];if(isMobile)ctx['fillStyle']='#0c0c14',ctx['fillRect'](0x0,0x0,_0x329fef,_0x419f7f);else{const _0x2bb802=ctx['createLinearGradient'](0x0,0x0,0x0,_0x419f7f);_0x2bb802['addColorStop'](0x0,'#0a0a12'),_0x2bb802['addColorStop'](0.4,'#0d0d18'),_0x2bb802['addColorStop'](0.7,'#10101a'),_0x2bb802['addColorStop'](0x1,'#08080e'),ctx['fillStyle']=_0x2bb802,ctx['fillRect'](0x0,0x0,_0x329fef,_0x419f7f);if(PERF['enableAmbientLight']){const _0x37f634=ctx['createRadialGradient'](_0x329fef/0x2,-0x32,0x0,_0x329fef/0x2,-0x32,_0x329fef*0.7);_0x37f634['addColorStop'](0x0,'rgba(80,\x2080,\x20120,\x200.12)'),_0x37f634['addColorStop'](0x1,'transparent'),ctx['fillStyle']=_0x37f634,ctx['fillRect'](0x0,0x0,_0x329fef,_0x419f7f);}}}function drawSurface(){const _0x2ad012=SURFACES[state['currentSurface']],_0x3480f2=getFloorY(),_0xcbbbca=ITEMS[state['currentItem']],_0x132249=_0x3480f2+_0xcbbbca['h']/0x2,_0x5b2cc7=Math['min'](canvas['width']*0.88,0x1e0),_0x35c933=0x5a,_0xf8d8c7=(canvas['width']-_0x5b2cc7)/0x2,_0x117d5a=0xc;PERF['enableShadows']&&(ctx['save'](),ctx['shadowBlur']=0x28,ctx['shadowColor']='rgba(0,\x200,\x200,\x200.5)',ctx['shadowOffsetY']=0xf,ctx['fillStyle']='rgba(0,0,0,0.01)',ctx['beginPath'](),roundRect(ctx,_0xf8d8c7,_0x132249,_0x5b2cc7,_0x35c933,_0x117d5a),ctx['fill'](),ctx['restore']());const _0x4123c0=ctx['createLinearGradient'](0x0,_0x132249,0x0,_0x132249+_0x35c933);if(state['currentSurface']==='woodBar')_0x4123c0['addColorStop'](0x0,'#6B4423'),_0x4123c0['addColorStop'](0.3,'#5C3317'),_0x4123c0['addColorStop'](0.7,'#4A2810'),_0x4123c0['addColorStop'](0x1,'#3D200D');else{if(state['currentSurface']==='marbleCounter')_0x4123c0['addColorStop'](0x0,'#f5f5f5'),_0x4123c0['addColorStop'](0.5,'#e8e8e8'),_0x4123c0['addColorStop'](0x1,'#d0d0d0');else state['currentSurface']==='metalTable'?(_0x4123c0['addColorStop'](0x0,'#5a5a5a'),_0x4123c0['addColorStop'](0.3,'#4a4a4a'),_0x4123c0['addColorStop'](0.7,'#3a3a3a'),_0x4123c0['addColorStop'](0x1,'#2a2a2a')):(_0x4123c0['addColorStop'](0x0,'rgba(100,\x20180,\x20220,\x200.5)'),_0x4123c0['addColorStop'](0x1,'rgba(60,\x20140,\x20180,\x200.4)'));}ctx['fillStyle']=_0x4123c0,ctx['beginPath'](),roundRect(ctx,_0xf8d8c7,_0x132249,_0x5b2cc7,_0x35c933,_0x117d5a),ctx['fill']();const _0x31bf4c=ctx['createLinearGradient'](_0xf8d8c7,_0x132249,_0xf8d8c7+_0x5b2cc7,_0x132249);_0x31bf4c['addColorStop'](0x0,'rgba(255,255,255,0.15)'),_0x31bf4c['addColorStop'](0.5,'rgba(255,255,255,0.3)'),_0x31bf4c['addColorStop'](0x1,'rgba(255,255,255,0.1)'),ctx['fillStyle']=_0x31bf4c,ctx['beginPath'](),ctx['moveTo'](_0xf8d8c7+_0x117d5a,_0x132249),ctx['lineTo'](_0xf8d8c7+_0x5b2cc7-_0x117d5a,_0x132249),ctx['arcTo'](_0xf8d8c7+_0x5b2cc7,_0x132249,_0xf8d8c7+_0x5b2cc7,_0x132249+_0x117d5a,_0x117d5a),ctx['lineTo'](_0xf8d8c7+_0x5b2cc7,_0x132249+0x8),ctx['lineTo'](_0xf8d8c7,_0x132249+0x8),ctx['lineTo'](_0xf8d8c7,_0x132249+_0x117d5a),ctx['arcTo'](_0xf8d8c7,_0x132249,_0xf8d8c7+_0x117d5a,_0x132249,_0x117d5a),ctx['closePath'](),ctx['fill'](),ctx['strokeStyle']='rgba(255,255,255,0.25)',ctx['lineWidth']=0x1,ctx['beginPath'](),ctx['moveTo'](_0xf8d8c7+_0x117d5a,_0x132249+0.5),ctx['lineTo'](_0xf8d8c7+_0x5b2cc7-_0x117d5a,_0x132249+0.5),ctx['stroke']();if(state['currentSurface']==='woodBar'){ctx['strokeStyle']='rgba(0,0,0,0.15)',ctx['lineWidth']=0x1;for(let _0x58f49d=0x0;_0x58f49d<0x8;_0x58f49d++){const _0x11b528=_0x132249+0xf+_0x58f49d*0xa;ctx['beginPath'](),ctx['moveTo'](_0xf8d8c7+0x14,_0x11b528),ctx['bezierCurveTo'](_0xf8d8c7+_0x5b2cc7*0.3,_0x11b528+(Math['random']()-0.5)*0x4,_0xf8d8c7+_0x5b2cc7*0.6,_0x11b528+(Math['random']()-0.5)*0x4,_0xf8d8c7+_0x5b2cc7-0x14,_0x11b528),ctx['stroke']();}}ctx['strokeStyle']='rgba(255,255,255,0.08)',ctx['lineWidth']=0x2,ctx['setLineDash']([0x8,0xc]),ctx['beginPath'](),ctx['moveTo'](canvas['width']/0x2-0x32,_0x3480f2),ctx['lineTo'](canvas['width']/0x2+0x32,_0x3480f2),ctx['stroke'](),ctx['setLineDash']([]);}function drawObject(){const _0x274aca=ITEMS[state['currentItem']],_0xac659b=itemImages[state['currentItem']];ctx['save'](),ctx['translate'](obj['x'],obj['y']),ctx['rotate'](obj['angle']),ctx['save'](),ctx['rotate'](-obj['angle']),ctx['shadowBlur']=0x19,ctx['shadowColor']='rgba(0,0,0,0.4)',ctx['shadowOffsetY']=0xa,ctx['fillStyle']='rgba(0,0,0,0.01)',ctx['fillRect'](-_0x274aca['w']/0x2,-_0x274aca['h']/0x2,_0x274aca['w'],_0x274aca['h']),ctx['restore']();if(_0xac659b&&_0xac659b['complete']&&_0xac659b['naturalWidth']>0x0){const _0x4d91c9=_0x274aca['h']/_0xac659b['naturalHeight'],_0x550851=_0xac659b['naturalWidth']*_0x4d91c9,_0x5e1b09=_0x274aca['h'];ctx['drawImage'](_0xac659b,-_0x550851/0x2,-_0x5e1b09/0x2,_0x550851,_0x5e1b09);}else _0x274aca['type']==='glass'?drawGlass(_0x274aca):drawBottle(_0x274aca);ctx['restore']();}function drawGlass(_0x50093c){const _0x548eed=_0x50093c['h'],_0x12be5e=_0x50093c['topW'],_0x52a615=_0x50093c['bottomW'];ctx['beginPath'](),ctx['moveTo'](-_0x12be5e/0x2,-_0x548eed/0x2),ctx['lineTo'](_0x12be5e/0x2,-_0x548eed/0x2),ctx['lineTo'](_0x52a615/0x2,_0x548eed/0x2),ctx['lineTo'](-_0x52a615/0x2,_0x548eed/0x2),ctx['closePath']();const _0xbc3129=ctx['createLinearGradient'](-_0x12be5e/0x2,0x0,_0x12be5e/0x2,0x0);_0xbc3129['addColorStop'](0x0,'rgba(255,255,255,0.08)'),_0xbc3129['addColorStop'](0.3,'rgba(255,255,255,0.2)'),_0xbc3129['addColorStop'](0.5,'rgba(255,255,255,0.12)'),_0xbc3129['addColorStop'](0.7,'rgba(255,255,255,0.18)'),_0xbc3129['addColorStop'](0x1,'rgba(255,255,255,0.05)'),ctx['fillStyle']=_0xbc3129,ctx['fill'](),ctx['save'](),ctx['beginPath'](),ctx['moveTo'](-_0x12be5e/0x2,-_0x548eed/0x2),ctx['lineTo'](_0x12be5e/0x2,-_0x548eed/0x2),ctx['lineTo'](_0x52a615/0x2,_0x548eed/0x2),ctx['lineTo'](-_0x52a615/0x2,_0x548eed/0x2),ctx['closePath'](),ctx['clip']();const _0x4e4c80=ctx['createLinearGradient'](0x0,-_0x548eed/0x4,0x0,_0x548eed/0x2);_0x4e4c80['addColorStop'](0x0,'transparent'),_0x4e4c80['addColorStop'](0.1,_0x50093c['fill']),_0x4e4c80['addColorStop'](0.9,_0x50093c['fill']),_0x4e4c80['addColorStop'](0x1,shadeColor(_0x50093c['fill'],-0x1e)),ctx['fillStyle']=_0x4e4c80,ctx['globalAlpha']=0.85,ctx['fillRect'](-_0x12be5e,-_0x548eed*0.15,_0x12be5e*0x2,_0x548eed),ctx['restore'](),ctx['strokeStyle']='rgba(255,255,255,0.6)',ctx['lineWidth']=0x2,ctx['beginPath'](),ctx['moveTo'](-_0x12be5e/0x2,-_0x548eed/0x2),ctx['lineTo'](_0x12be5e/0x2,-_0x548eed/0x2),ctx['stroke'](),ctx['strokeStyle']='rgba(255,255,255,0.35)',ctx['lineWidth']=1.5,ctx['beginPath'](),ctx['moveTo'](-_0x12be5e/0x2,-_0x548eed/0x2),ctx['lineTo'](_0x12be5e/0x2,-_0x548eed/0x2),ctx['lineTo'](_0x52a615/0x2,_0x548eed/0x2),ctx['lineTo'](-_0x52a615/0x2,_0x548eed/0x2),ctx['closePath'](),ctx['stroke']();const _0x3a1e71=ctx['createLinearGradient'](-_0x12be5e/0x2,0x0,-_0x12be5e/0x2+0xc,0x0);_0x3a1e71['addColorStop'](0x0,'rgba(255,255,255,0.4)'),_0x3a1e71['addColorStop'](0x1,'rgba(255,255,255,0)'),ctx['fillStyle']=_0x3a1e71,ctx['beginPath'](),ctx['moveTo'](-_0x12be5e/0x2+0x3,-_0x548eed/0x2+0x4),ctx['lineTo'](-_0x12be5e/0x2+0xc,-_0x548eed/0x2+0x4),ctx['lineTo'](-_0x52a615/0x2+0xa,_0x548eed/0x2-0x4),ctx['lineTo'](-_0x52a615/0x2+0x3,_0x548eed/0x2-0x4),ctx['closePath'](),ctx['fill'](),ctx['fillStyle']='rgba(255,255,255,0.8)',ctx['beginPath'](),ctx['arc'](-_0x12be5e/0x4,-_0x548eed/0x2+0x3,0x2,0x0,Math['PI']*0x2),ctx['fill']();}function drawBottle(_0x3e2563){const _0x497580=_0x3e2563['h'],_0x208ede=_0x3e2563['w'],_0x573ec2=_0x3e2563['neckH'],_0x5c5e55=_0x3e2563['neckW'],_0x35b8c0=_0x497580-_0x573ec2,_0x49a39e=ctx['createLinearGradient'](-_0x208ede/0x2,0x0,_0x208ede/0x2,0x0);_0x49a39e['addColorStop'](0x0,'rgba(255,255,255,0.05)'),_0x49a39e['addColorStop'](0.2,'rgba(255,255,255,0.18)'),_0x49a39e['addColorStop'](0.4,'rgba(255,255,255,0.08)'),_0x49a39e['addColorStop'](0.6,'rgba(255,255,255,0.15)'),_0x49a39e['addColorStop'](0.8,'rgba(255,255,255,0.1)'),_0x49a39e['addColorStop'](0x1,'rgba(255,255,255,0.03)'),ctx['beginPath'](),roundRect(ctx,-_0x208ede/0x2,-_0x497580/0x2+_0x573ec2,_0x208ede,_0x35b8c0,0x8),ctx['fillStyle']=_0x49a39e,ctx['fill'](),ctx['beginPath'](),ctx['moveTo'](-_0x5c5e55/0x2,-_0x497580/0x2+_0x573ec2),ctx['lineTo'](-_0x5c5e55/0x2-0x4,-_0x497580/0x2+_0x573ec2-0x5),ctx['lineTo'](-_0x5c5e55/0x2,-_0x497580/0x2+0xc),ctx['quadraticCurveTo'](-_0x5c5e55/0x2,-_0x497580/0x2+0x4,-_0x5c5e55/0x4,-_0x497580/0x2+0x2),ctx['lineTo'](_0x5c5e55/0x4,-_0x497580/0x2+0x2),ctx['quadraticCurveTo'](_0x5c5e55/0x2,-_0x497580/0x2+0x4,_0x5c5e55/0x2,-_0x497580/0x2+0xc),ctx['lineTo'](_0x5c5e55/0x2+0x4,-_0x497580/0x2+_0x573ec2-0x5),ctx['lineTo'](_0x5c5e55/0x2,-_0x497580/0x2+_0x573ec2),ctx['closePath'](),ctx['fillStyle']=_0x49a39e,ctx['fill'](),ctx['save'](),ctx['beginPath'](),roundRect(ctx,-_0x208ede/0x2,-_0x497580/0x2+_0x573ec2,_0x208ede,_0x35b8c0,0x8),ctx['clip']();const _0x3afcc4=ctx['createLinearGradient'](0x0,0x0,0x0,_0x35b8c0);_0x3afcc4['addColorStop'](0x0,_0x3e2563['fill']),_0x3afcc4['addColorStop'](0.8,_0x3e2563['fill']),_0x3afcc4['addColorStop'](0x1,shadeColor(_0x3e2563['fill'],-0x19)),ctx['fillStyle']=_0x3afcc4,ctx['globalAlpha']=0.7,ctx['fillRect'](-_0x208ede,_0x497580/0x2-_0x35b8c0*0.6,_0x208ede*0x2,_0x35b8c0),ctx['restore'](),ctx['strokeStyle']='rgba(255,255,255,0.4)',ctx['lineWidth']=0x2,ctx['beginPath'](),roundRect(ctx,-_0x208ede/0x2,-_0x497580/0x2+_0x573ec2,_0x208ede,_0x35b8c0,0x8),ctx['stroke'](),ctx['beginPath'](),ctx['moveTo'](-_0x5c5e55/0x2,-_0x497580/0x2+_0x573ec2),ctx['lineTo'](-_0x5c5e55/0x2,-_0x497580/0x2+0xc),ctx['quadraticCurveTo'](-_0x5c5e55/0x2,-_0x497580/0x2+0x4,0x0,-_0x497580/0x2+0x2),ctx['quadraticCurveTo'](_0x5c5e55/0x2,-_0x497580/0x2+0x4,_0x5c5e55/0x2,-_0x497580/0x2+0xc),ctx['lineTo'](_0x5c5e55/0x2,-_0x497580/0x2+_0x573ec2),ctx['stroke']();const _0x49b690=ctx['createLinearGradient'](-_0x5c5e55/0x2,-_0x497580/0x2,_0x5c5e55/0x2,-_0x497580/0x2);_0x49b690['addColorStop'](0x0,'#333'),_0x49b690['addColorStop'](0.5,'#555'),_0x49b690['addColorStop'](0x1,'#222'),ctx['fillStyle']=_0x49b690,ctx['fillRect'](-_0x5c5e55/0x2+0x2,-_0x497580/0x2,_0x5c5e55-0x4,0x6);const _0x6fe1c0=ctx['createLinearGradient'](-_0x208ede/0x2,0x0,-_0x208ede/0x2+0xf,0x0);_0x6fe1c0['addColorStop'](0x0,'rgba(255,255,255,0.35)'),_0x6fe1c0['addColorStop'](0x1,'rgba(255,255,255,0)'),ctx['fillStyle']=_0x6fe1c0,ctx['fillRect'](-_0x208ede/0x2+0x3,-_0x497580/0x2+_0x573ec2+0x8,0xc,_0x35b8c0-0x14),ctx['fillStyle']='rgba(255,255,255,0.12)',ctx['fillRect'](-_0x208ede/0x2+0x8,_0x497580/0x2-_0x35b8c0/0x2-0x12,_0x208ede-0x10,0x24),ctx['strokeStyle']='rgba(255,255,255,0.2)',ctx['lineWidth']=0x1,ctx['strokeRect'](-_0x208ede/0x2+0x8,_0x497580/0x2-_0x35b8c0/0x2-0x12,_0x208ede-0x10,0x24),ctx['fillStyle']='rgba(255,255,255,0.9)',ctx['beginPath'](),ctx['arc'](-_0x208ede/0x4,-_0x497580/0x2+_0x573ec2+0xf,2.5,0x0,Math['PI']*0x2),ctx['fill']();}function shadeColor(_0x351710,_0x255fa4){const _0x341cb4=parseInt(_0x351710['replace']('#',''),0x10),_0x1f039d=Math['round'](2.55*_0x255fa4),_0x39a7d1=Math['max'](0x0,Math['min'](0xff,(_0x341cb4>>0x10)+_0x1f039d)),_0x5206e7=Math['max'](0x0,Math['min'](0xff,(_0x341cb4>>0x8&0xff)+_0x1f039d)),_0x579269=Math['max'](0x0,Math['min'](0xff,(_0x341cb4&0xff)+_0x1f039d));return'#'+(0x1000000+_0x39a7d1*0x10000+_0x5206e7*0x100+_0x579269)['toString'](0x10)['slice'](0x1);}function drawParticles(){for(const _0x37d3c1 of state['particles']){ctx['globalAlpha']=_0x37d3c1['life'],ctx['fillStyle']=_0x37d3c1['color'],ctx['beginPath'](),ctx['arc'](_0x37d3c1['x'],_0x37d3c1['y'],_0x37d3c1['size'],0x0,Math['PI']*0x2),ctx['fill']();}ctx['globalAlpha']=0x1;}function roundRect(_0x4ed38f,_0x58ad9f,_0x1d2da7,_0x31b5a1,_0x4eb876,_0x4d46eb){_0x4ed38f['moveTo'](_0x58ad9f+_0x4d46eb,_0x1d2da7),_0x4ed38f['arcTo'](_0x58ad9f+_0x31b5a1,_0x1d2da7,_0x58ad9f+_0x31b5a1,_0x1d2da7+_0x4eb876,_0x4d46eb),_0x4ed38f['arcTo'](_0x58ad9f+_0x31b5a1,_0x1d2da7+_0x4eb876,_0x58ad9f,_0x1d2da7+_0x4eb876,_0x4d46eb),_0x4ed38f['arcTo'](_0x58ad9f,_0x1d2da7+_0x4eb876,_0x58ad9f,_0x1d2da7,_0x4d46eb),_0x4ed38f['arcTo'](_0x58ad9f,_0x1d2da7,_0x58ad9f+_0x31b5a1,_0x1d2da7,_0x4d46eb);}function updateUI(){if(ui['score'])ui['score']['textContent']=state['score'];if(ui['combo'])ui['combo']['textContent']=state['combo']>0x1?state['combo']+'x':'';}function updatePowerBar(){if(ui['powerFill'])ui['powerFill']['style']['width']=state['power']+'%';if(ui['powerText'])ui['powerText']['textContent']=Math['round'](state['power'])+'%';}function showMessage(_0x18a476,_0x5070cd){if(!ui['message'])return;ui['message']['textContent']=_0x18a476,ui['message']['style']['color']=_0x5070cd,ui['message']['classList']['add']('show'),setTimeout(()=>ui['message']['classList']['remove']('show'),0x4b0);}function cycleItem(){const _0x364bb7=Object['keys'](ITEMS),_0x4330c4=_0x364bb7['indexOf'](state['currentItem']);state['currentItem']=_0x364bb7[(_0x4330c4+0x1)%_0x364bb7['length']],resetObject();const _0x440d98=ITEMS[state['currentItem']];showMessage(_0x440d98['name'],'#3b82f6');}function cycleSurface(){const _0x11a2d9=Object['keys'](SURFACES),_0x56e6ca=_0x11a2d9['indexOf'](state['currentSurface']);state['currentSurface']=_0x11a2d9[(_0x56e6ca+0x1)%_0x11a2d9['length']];const _0x381d7a=SURFACES[state['currentSurface']];showMessage(_0x381d7a['name'],'#8b5cf6');}function toggleSound(){state['soundOn']=!state['soundOn'];if(ui['soundBtn'])ui['soundBtn']['textContent']=state['soundOn']?'ðŸ”Š':'ðŸ”‡';}let audioCtx;function playSound(_0x4978da){if(!state['soundOn'])return;try{if(!audioCtx)audioCtx=new(window['AudioContext']||window['webkitAudioContext'])();const _0x48ad70=audioCtx['createOscillator'](),_0x10775e=audioCtx['createGain'](),_0x3f37c6={'launch':{'freq':0x190,'type':'triangle','dur':0.1},'bounce':{'freq':0x96,'type':'square','dur':0.08},'success':{'freq':0x258,'type':'sine','dur':0.15},'fail':{'freq':0x64,'type':'sawtooth','dur':0.2}},_0x131308=_0x3f37c6[_0x4978da]||_0x3f37c6['bounce'];_0x48ad70['type']=_0x131308['type'],_0x48ad70['frequency']['setValueAtTime'](_0x131308['freq'],audioCtx['currentTime']),_0x48ad70['frequency']['exponentialRampToValueAtTime'](_0x131308['freq']/0x2,audioCtx['currentTime']+_0x131308['dur']),_0x10775e['gain']['setValueAtTime'](0.06,audioCtx['currentTime']),_0x10775e['gain']['exponentialRampToValueAtTime'](0.001,audioCtx['currentTime']+_0x131308['dur']),_0x48ad70['connect'](_0x10775e),_0x10775e['connect'](audioCtx['destination']),_0x48ad70['start'](),_0x48ad70['stop'](audioCtx['currentTime']+_0x131308['dur']+0.05);}catch(_0x3a029e){}}async function saveScore(){if(!state['username']||state['score']===0x0)return;try{await fetch('/api/leaderboard',{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'username':state['username'],'score':state['score'],'stats':{'longestCombo':state['bestCombo']}})});}catch(_0x3e0836){}}async function loadLeaderboard(){if(!ui['leaderboard'])return;ui['leaderboard']['innerHTML']='<li>YÃ¼kleniyor...</li>';try{const _0x3a217d=await fetch('/api/leaderboard'),_0x525b0a=await _0x3a217d['json']();ui['leaderboard']['innerHTML']='';if(!_0x525b0a||_0x525b0a['length']===0x0){ui['leaderboard']['innerHTML']='<li>HenÃ¼z\x20skor\x20yok</li>';return;}_0x525b0a['slice'](0x0,0x5)['forEach']((_0x384b1b,_0x1f56ea)=>{const _0x592c7d=document['createElement']('li');_0x592c7d['className']=_0x1f56ea<0x3?'rank-'+(_0x1f56ea+0x1):'',_0x592c7d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-num\x22>'+(_0x1f56ea+0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+escapeHtml(_0x384b1b['username'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22pts\x22>'+_0x384b1b['score']+'</span>\x0a\x20\x20\x20\x20\x20\x20',ui['leaderboard']['appendChild'](_0x592c7d);});}catch(_0x3052fc){ui['leaderboard']['innerHTML']='<li\x20style=\x22color:#ef4444\x22>BaÄŸlantÄ±\x20hatasÄ±</li>';}}function escapeHtml(_0x561f4c){const _0x1beeec=document['createElement']('div');return _0x1beeec['textContent']=_0x561f4c,_0x1beeec['innerHTML'];}window['onload']=init;