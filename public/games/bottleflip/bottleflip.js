const canvas=document['getElementById']('gameCanvas'),ctx=canvas['getContext']('2d'),ITEMS={'shotGlass':{'name':'Shot\x20Bardak','type':'glass','h':0x78,'w':0x46,'topW':0x46,'bottomW':0x32,'image':'/images/bottles/shot/jagermeister.png','fill':'#c9a227','opacity':0.6,'mass':0.4,'centerOfMass':0.7},'beerGlass':{'name':'Bira\x20BardaÄŸÄ±','type':'glass','h':0xa0,'w':0x50,'topW':0x50,'bottomW':0x41,'image':'/images/bottles/bira/efes.png','fill':'#f5b800','opacity':0.5,'mass':0.6,'centerOfMass':0.65},'wineGlass':{'name':'Åžarap\x20Kadehi','type':'glass','h':0xaa,'w':0x50,'topW':0x4b,'bottomW':0x28,'image':'/images/bottles/sarap/kavaklidere.png','fill':'#722F37','opacity':0.4,'mass':0.5,'centerOfMass':0.55},'whiskyGlass':{'name':'Viski\x20BardaÄŸÄ±','type':'glass','h':0x8c,'w':0x50,'topW':0x50,'bottomW':0x46,'image':'/images/bottles/viski/jack-daniels.png','fill':'#d4a574','opacity':0.5,'mass':0.7,'centerOfMass':0.75},'rakiBottle':{'name':'RakÄ±\x20ÅžiÅŸesi','type':'bottle','h':0xc8,'w':0x46,'neckH':0x32,'neckW':0x16,'image':'/images/bottles/raki/yeni-raki.png','fill':'#ffffff','opacity':0.3,'mass':0x1,'centerOfMass':0.6},'vodkaBottle':{'name':'Votka\x20ÅžiÅŸesi','type':'bottle','h':0xc8,'w':0x46,'neckH':0x3c,'neckW':0x19,'image':'/images/bottles/vodka/istanblue.png','fill':'#e0e0e0','opacity':0.25,'mass':1.1,'centerOfMass':0.55}},SURFACES={'rakiTable':{'name':'RakÄ±\x20MasasÄ±','image':'tables/raki_table.png','bounce':0.3,'friction':0.8},'beerTable':{'name':'Bira\x20MasasÄ±','image':'tables/beer_table.png','bounce':0.35,'friction':0.75},'woodBar':{'name':'AhÅŸap\x20Bar','image':'tables/wood_table.png','bounce':0.3,'friction':0.8},'glassTable':{'name':'Cam\x20Masa','color':'rgba(100,180,220,0.4)','highlight':'rgba(150,200,240,0.6)','bounce':0.25,'friction':0.5,'transparent':!![]}},PHYSICS={'gravity':0.35,'airDrag':0.997,'angularDrag':0.995,'minVelocity':0.5,'maxPower':0x64,'perfectLanding':0x8,'goodLanding':0x14,'okLanding':0x23},isMobile=/Android|iPhone|iPad|iPod|webOS|BlackBerry|IEMobile|Opera Mini/i['test'](navigator['userAgent'])||window['innerWidth']<0x300,PERF={'maxParticles':isMobile?0x6:0xf,'enableShadows':!isMobile,'enableGlow':!isMobile,'enableWoodGrain':!isMobile,'enableAmbientLight':!isMobile};let state={'screen':'menu','username':'','currentItem':'shotGlass','currentSurface':'woodBar','score':0x0,'combo':0x0,'bestCombo':0x0,'isFlipping':![],'isCharging':![],'power':0x0,'powerDir':1.5,'soundOn':!![],'particles':[]},obj={'x':0x0,'y':0x0,'vx':0x0,'vy':0x0,'angle':0x0,'angVel':0x0,'grounded':!![]};const $=_0x5c18c1=>document['getElementById'](_0x5c18c1),ui={'menuScreen':$('loginScreen'),'gameScreen':$('gameScreen'),'username':$('usernameInput'),'startBtn':$('startBtn'),'leaderboard':$('top5List'),'score':$('currentScore'),'combo':$('comboDisplay'),'message':$('messageOverlay'),'powerFill':$('powerFill'),'powerText':$('powerText'),'flipBtn':$('flipBtn'),'exitBtn':$('exitBtn'),'soundBtn':$('soundBtn'),'itemBtn':$('itemBtn'),'surfaceBtn':$('surfaceBtn')},tableImages={};function preloadTableImages(){Object['keys'](SURFACES)['forEach'](_0x1a075d=>{const _0x55c9e9=SURFACES[_0x1a075d];if(_0x55c9e9['image']){const _0x54673b=new Image();_0x54673b['src']=_0x55c9e9['image'],_0x54673b['onload']=()=>{tableImages[_0x1a075d]=_0x54673b;};}});}const itemImages={};function preloadItemImages(){Object['keys'](ITEMS)['forEach'](_0x5ae21d=>{const _0x918bdf=ITEMS[_0x5ae21d];if(_0x918bdf['image']){const _0x56ec77=new Image();_0x56ec77['src']=_0x918bdf['image'],_0x56ec77['onload']=()=>{itemImages[_0x5ae21d]=_0x56ec77,console['log']('Loaded:',_0x5ae21d,_0x918bdf['image']);},_0x56ec77['onerror']=()=>{console['warn']('Failed\x20to\x20load:',_0x918bdf['image']);};}});}function init(){preloadTableImages(),preloadItemImages(),resize(),loadLeaderboard(),window['addEventListener']('resize',resize),ui['startBtn']?.['addEventListener']('click',startGame),ui['exitBtn']?.['addEventListener']('click',exitGame),ui['soundBtn']?.['addEventListener']('click',toggleSound),ui['itemBtn']?.['addEventListener']('click',cycleItem),ui['surfaceBtn']?.['addEventListener']('click',cycleSurface);if(ui['flipBtn']){ui['flipBtn']['addEventListener']('contextmenu',_0x172244=>_0x172244['preventDefault']());const _0x558ad8=_0x5520b4=>{state['screen']==='game'&&!state['isFlipping']&&obj['grounded']&&(_0x5520b4['preventDefault'](),state['isCharging']=!![],state['power']=0x0,ui['flipBtn']['classList']['add']('pressing'));},_0x4dc7f2=_0x20cced=>{if(state['isCharging']){_0x20cced['preventDefault'](),state['isCharging']=![],ui['flipBtn']['classList']['remove']('pressing');if(state['power']>0x5)doFlip();}};ui['flipBtn']['addEventListener']('mousedown',_0x558ad8),ui['flipBtn']['addEventListener']('touchstart',_0x558ad8,{'passive':![]}),window['addEventListener']('mouseup',_0x4dc7f2),window['addEventListener']('touchend',_0x4dc7f2);}requestAnimationFrame(gameLoop);}function resize(){canvas['width']=window['innerWidth'],canvas['height']=window['innerHeight'],resetObject();}function startGame(){const _0x3baa88=ui['username']?.['value']['trim']()||'Oyuncu';if(_0x3baa88['length']<0x2){showMessage('Ä°sim\x20Ã§ok\x20kÄ±sa!','#ef4444');return;}state['username']=_0x3baa88,state['screen']='game',state['score']=0x0,state['combo']=0x0,ui['menuScreen']?.['classList']['remove']('active'),ui['gameScreen']?.['classList']['add']('active'),resetObject(),updateUI();}function exitGame(){if(state['score']>0x0)saveScore();state['screen']='menu',ui['menuScreen']?.['classList']['add']('active'),ui['gameScreen']?.['classList']['remove']('active'),loadLeaderboard();}function doFlip(){const _0x125cce=ITEMS[state['currentItem']],_0x14b8d5=SURFACES[state['currentSurface']];state['isFlipping']=!![],obj['grounded']=![],state['flipStartTime']=Date['now'](),ui['flipBtn']['textContent']='ðŸ”„',ui['flipBtn']['disabled']=!![];const _0x4779e8=state['power']/PHYSICS['maxPower'],_0x2b9d17=Math['sqrt'](0x1/_0x125cce['mass']),_0xabfad0=0x1+_0x125cce['h']/0x96*0.2,_0xf8a124=0x8+_0x4779e8*0xa;obj['vy']=-_0xf8a124*_0x2b9d17*_0xabfad0;const _0x277f1d=(0x1-_0x4779e8*0.5)*0x5;obj['vx']=(Math['random']()-0.5)*_0x277f1d;const _0xc95ce0=Math['random']()>0.5?0x1:-0x1,_0x3466d3=0x1+(_0x125cce['centerOfMass']-0.5)*0.5,_0x30a267=0.1+_0x4779e8*0.3;obj['angVel']=_0x30a267*_0x2b9d17*_0x3466d3*_0xc95ce0,obj['wobble']=0.02,playSound('launch');}function updatePhysics(){if(state['isCharging']){state['power']+=state['powerDir']*0.7;if(state['power']>=PHYSICS['maxPower'])state['power']=PHYSICS['maxPower'],state['powerDir']=-Math['abs'](state['powerDir']);else state['power']<=0x0&&(state['power']=0x0,state['powerDir']=Math['abs'](state['powerDir']));updatePowerBar();}if(!state['isFlipping']){obj['grounded']&&obj['wobble']>0x0&&(obj['wobble']*=0.92,obj['angle']=Math['sin'](Date['now']()*0.01)*obj['wobble'],obj['wobble']<0.001&&(obj['wobble']=0x0,obj['angle']=0x0));return;}const _0x2071af=ITEMS[state['currentItem']],_0xf6b4c3=SURFACES[state['currentSurface']],_0x2118e3=0.9+_0x2071af['mass']*0.2;obj['vy']+=PHYSICS['gravity']*_0x2118e3;const _0x1b7daa=PHYSICS['airDrag']+(_0x2071af['mass']-0.5)*0.002;obj['vx']*=_0x1b7daa,obj['vy']*=Math['min'](0.999,_0x1b7daa);const _0xcb9be2=PHYSICS['angularDrag']-_0x2071af['h']/0xc8*0.01;obj['angVel']*=_0xcb9be2;if(obj['vy']>0x0){const _0x3ecbe1=0.0005*(0x1-_0x2071af['centerOfMass']);if(obj['angVel']>0x0)obj['angVel']-=_0x3ecbe1;else obj['angVel']+=_0x3ecbe1;}obj['x']+=obj['vx'],obj['y']+=obj['vy'],obj['angle']+=obj['angVel'];const _0xa9a405=_0x2071af['w']/0x2;if(obj['x']-_0xa9a405<0x0)obj['x']=_0xa9a405,obj['vx']*=-0.4,obj['angVel']+=obj['vx']*0.02;else obj['x']+_0xa9a405>canvas['width']&&(obj['x']=canvas['width']-_0xa9a405,obj['vx']*=-0.4,obj['angVel']-=obj['vx']*0.02);const _0x591d0b=getFloorY();if(obj['y']>=_0x591d0b){obj['y']=_0x591d0b;const _0x125fa8=Math['abs'](obj['vy']),_0x176387=Math['abs'](obj['angle']%(Math['PI']*0x2)*0xb4/Math['PI']),_0xab062f=_0x176387<0x1e||_0x176387>0x14a;if(_0x125fa8>2.5){const _0x2705a2=_0xab062f?0.5:1.2;obj['vy']*=-_0xf6b4c3['bounce']*_0x2705a2,obj['vx']*=_0xf6b4c3['friction'];if(!_0xab062f){const _0x15f517=_0x176387<0xb4?0x1:-0x1;obj['angVel']+=_0x15f517*_0x125fa8*0.008;}else obj['angVel']*=0.3;obj['angVel']*=_0xf6b4c3['friction'],createImpactParticles(),playSound('bounce');}else _0x125fa8>PHYSICS['minVelocity']?(obj['vy']*=-_0xf6b4c3['bounce']*0.3,obj['angVel']*=0.5):checkLanding();}updateParticles();}function checkLanding(){state['isFlipping']=![],obj['grounded']=!![],obj['vx']=0x0,obj['vy']=0x0,obj['angVel']=0x0,ui['flipBtn']['textContent']='BASILI\x20TUT',ui['flipBtn']['disabled']=![];let _0x14a823=(obj['angle']*0xb4/Math['PI']%0x168+0x168)%0x168;if(_0x14a823>0xb4)_0x14a823=0x168-_0x14a823;if(_0x14a823<=PHYSICS['perfectLanding'])handleSuccess('perfect');else{if(_0x14a823<=PHYSICS['goodLanding'])handleSuccess('good');else _0x14a823<=PHYSICS['okLanding']?handleSuccess('ok'):handleFail();}}function handleSuccess(_0x30e678){const _0x476ae=_0x30e678==='perfect'?0x3:_0x30e678==='good'?0x2:0x1,_0x74ee78=_0x30e678==='perfect'?'MÃœKEMMEL!':_0x30e678==='good'?'GÃœZEL!':'OLDU!',_0x43facc=_0x30e678==='perfect'?'#22c55e':_0x30e678==='good'?'#84cc16':'#eab308';state['score']+=_0x476ae,state['combo']++;if(state['combo']>state['bestCombo'])state['bestCombo']=state['combo'];showMessage(state['combo']>0x1?state['combo']+'x\x20'+_0x74ee78:_0x74ee78,_0x43facc),createSuccessParticles(),playSound('success'),obj['angle']=0x0,updateUI();if(state['score']%0x5===0x0)saveScore();}function handleFail(){state['combo']=0x0,showMessage('DÃœÅžTÃœ!','#ef4444'),playSound('fail');const _0x12cf1b=ITEMS[state['currentItem']];obj['angle']=Math['PI']/0x2,saveScore(),setTimeout(()=>{if(!state['isFlipping'])resetObject();},0x258);}function resetObject(){const _0x573fa5=ITEMS[state['currentItem']];obj['x']=canvas['width']/0x2,obj['y']=getFloorY(),obj['vx']=0x0,obj['vy']=0x0,obj['angle']=0x0,obj['angVel']=0x0,obj['grounded']=!![];}function getFloorY(){return canvas['height']-0x12c;}function createImpactParticles(){const _0x1c54b0=Math['min'](PERF['maxParticles'],0x8);for(let _0x5c1bf1=0x0;_0x5c1bf1<_0x1c54b0;_0x5c1bf1++){state['particles']['push']({'x':obj['x']+(Math['random']()-0.5)*0x1e,'y':getFloorY(),'vx':(Math['random']()-0.5)*0x6,'vy':-Math['random']()*0x4-0x2,'size':Math['random']()*0x4+0x2,'life':0x1,'color':'#ffffff'});}}function createSuccessParticles(){const _0x3e5797=['#22c55e','#84cc16','#fbbf24','#ffffff'];for(let _0x90fc85=0x0;_0x90fc85<0xf;_0x90fc85++){const _0x4ba3cf=_0x90fc85/0xf*Math['PI']*0x2;state['particles']['push']({'x':obj['x'],'y':obj['y'],'vx':Math['cos'](_0x4ba3cf)*(Math['random']()*0x4+0x2),'vy':Math['sin'](_0x4ba3cf)*(Math['random']()*0x4+0x2)-0x3,'size':Math['random']()*0x5+0x3,'life':0x1,'color':_0x3e5797[Math['floor'](Math['random']()*_0x3e5797['length'])]});}}function updateParticles(){for(let _0x14a941=state['particles']['length']-0x1;_0x14a941>=0x0;_0x14a941--){const _0xe4a45d=state['particles'][_0x14a941];_0xe4a45d['x']+=_0xe4a45d['vx'],_0xe4a45d['y']+=_0xe4a45d['vy'],_0xe4a45d['vy']+=0.15,_0xe4a45d['life']-=0.03;if(_0xe4a45d['life']<=0x0)state['particles']['splice'](_0x14a941,0x1);}}function gameLoop(){updatePhysics(),render(),requestAnimationFrame(gameLoop);}function render(){ctx['clearRect'](0x0,0x0,canvas['width'],canvas['height']),drawBackground(),drawSurface(),drawObject(),drawParticles();}function drawBackground(){const _0x5f189b=canvas['width'],_0x2ce595=canvas['height'];if(isMobile)ctx['fillStyle']='#0c0c14',ctx['fillRect'](0x0,0x0,_0x5f189b,_0x2ce595);else{const _0x57d111=ctx['createLinearGradient'](0x0,0x0,0x0,_0x2ce595);_0x57d111['addColorStop'](0x0,'#0a0a12'),_0x57d111['addColorStop'](0.4,'#0d0d18'),_0x57d111['addColorStop'](0.7,'#10101a'),_0x57d111['addColorStop'](0x1,'#08080e'),ctx['fillStyle']=_0x57d111,ctx['fillRect'](0x0,0x0,_0x5f189b,_0x2ce595);if(PERF['enableAmbientLight']){const _0x1a4e3d=ctx['createRadialGradient'](_0x5f189b/0x2,-0x32,0x0,_0x5f189b/0x2,-0x32,_0x5f189b*0.7);_0x1a4e3d['addColorStop'](0x0,'rgba(80,\x2080,\x20120,\x200.12)'),_0x1a4e3d['addColorStop'](0x1,'transparent'),ctx['fillStyle']=_0x1a4e3d,ctx['fillRect'](0x0,0x0,_0x5f189b,_0x2ce595);}}}function drawSurface(){const _0x119199=SURFACES[state['currentSurface']],_0x173709=getFloorY(),_0x9041fb=ITEMS[state['currentItem']],_0x4053ea=_0x173709+_0x9041fb['h']/0x2,_0x4e31cc=Math['min'](canvas['width']*0.88,0x1e0),_0x52ded9=0x5a,_0x506d7c=(canvas['width']-_0x4e31cc)/0x2,_0x50530d=0xc;PERF['enableShadows']&&(ctx['save'](),ctx['shadowBlur']=0x28,ctx['shadowColor']='rgba(0,\x200,\x200,\x200.5)',ctx['shadowOffsetY']=0xf,ctx['fillStyle']='rgba(0,0,0,0.01)',ctx['beginPath'](),roundRect(ctx,_0x506d7c,_0x4053ea,_0x4e31cc,_0x52ded9,_0x50530d),ctx['fill'](),ctx['restore']());const _0x1a04ed=ctx['createLinearGradient'](0x0,_0x4053ea,0x0,_0x4053ea+_0x52ded9);if(state['currentSurface']==='woodBar')_0x1a04ed['addColorStop'](0x0,'#6B4423'),_0x1a04ed['addColorStop'](0.3,'#5C3317'),_0x1a04ed['addColorStop'](0.7,'#4A2810'),_0x1a04ed['addColorStop'](0x1,'#3D200D');else{if(state['currentSurface']==='marbleCounter')_0x1a04ed['addColorStop'](0x0,'#f5f5f5'),_0x1a04ed['addColorStop'](0.5,'#e8e8e8'),_0x1a04ed['addColorStop'](0x1,'#d0d0d0');else state['currentSurface']==='metalTable'?(_0x1a04ed['addColorStop'](0x0,'#5a5a5a'),_0x1a04ed['addColorStop'](0.3,'#4a4a4a'),_0x1a04ed['addColorStop'](0.7,'#3a3a3a'),_0x1a04ed['addColorStop'](0x1,'#2a2a2a')):(_0x1a04ed['addColorStop'](0x0,'rgba(100,\x20180,\x20220,\x200.5)'),_0x1a04ed['addColorStop'](0x1,'rgba(60,\x20140,\x20180,\x200.4)'));}ctx['fillStyle']=_0x1a04ed,ctx['beginPath'](),roundRect(ctx,_0x506d7c,_0x4053ea,_0x4e31cc,_0x52ded9,_0x50530d),ctx['fill']();const _0x552176=ctx['createLinearGradient'](_0x506d7c,_0x4053ea,_0x506d7c+_0x4e31cc,_0x4053ea);_0x552176['addColorStop'](0x0,'rgba(255,255,255,0.15)'),_0x552176['addColorStop'](0.5,'rgba(255,255,255,0.3)'),_0x552176['addColorStop'](0x1,'rgba(255,255,255,0.1)'),ctx['fillStyle']=_0x552176,ctx['beginPath'](),ctx['moveTo'](_0x506d7c+_0x50530d,_0x4053ea),ctx['lineTo'](_0x506d7c+_0x4e31cc-_0x50530d,_0x4053ea),ctx['arcTo'](_0x506d7c+_0x4e31cc,_0x4053ea,_0x506d7c+_0x4e31cc,_0x4053ea+_0x50530d,_0x50530d),ctx['lineTo'](_0x506d7c+_0x4e31cc,_0x4053ea+0x8),ctx['lineTo'](_0x506d7c,_0x4053ea+0x8),ctx['lineTo'](_0x506d7c,_0x4053ea+_0x50530d),ctx['arcTo'](_0x506d7c,_0x4053ea,_0x506d7c+_0x50530d,_0x4053ea,_0x50530d),ctx['closePath'](),ctx['fill'](),ctx['strokeStyle']='rgba(255,255,255,0.25)',ctx['lineWidth']=0x1,ctx['beginPath'](),ctx['moveTo'](_0x506d7c+_0x50530d,_0x4053ea+0.5),ctx['lineTo'](_0x506d7c+_0x4e31cc-_0x50530d,_0x4053ea+0.5),ctx['stroke']();if(state['currentSurface']==='woodBar'){ctx['strokeStyle']='rgba(0,0,0,0.15)',ctx['lineWidth']=0x1;for(let _0x165380=0x0;_0x165380<0x8;_0x165380++){const _0x109bb0=_0x4053ea+0xf+_0x165380*0xa;ctx['beginPath'](),ctx['moveTo'](_0x506d7c+0x14,_0x109bb0),ctx['bezierCurveTo'](_0x506d7c+_0x4e31cc*0.3,_0x109bb0+(Math['random']()-0.5)*0x4,_0x506d7c+_0x4e31cc*0.6,_0x109bb0+(Math['random']()-0.5)*0x4,_0x506d7c+_0x4e31cc-0x14,_0x109bb0),ctx['stroke']();}}ctx['strokeStyle']='rgba(255,255,255,0.08)',ctx['lineWidth']=0x2,ctx['setLineDash']([0x8,0xc]),ctx['beginPath'](),ctx['moveTo'](canvas['width']/0x2-0x32,_0x173709),ctx['lineTo'](canvas['width']/0x2+0x32,_0x173709),ctx['stroke'](),ctx['setLineDash']([]);}function drawObject(){const _0x301620=ITEMS[state['currentItem']],_0x2841fb=itemImages[state['currentItem']];ctx['save'](),ctx['translate'](obj['x'],obj['y']),ctx['rotate'](obj['angle']),ctx['save'](),ctx['rotate'](-obj['angle']),ctx['shadowBlur']=0x19,ctx['shadowColor']='rgba(0,0,0,0.4)',ctx['shadowOffsetY']=0xa,ctx['fillStyle']='rgba(0,0,0,0.01)',ctx['fillRect'](-_0x301620['w']/0x2,-_0x301620['h']/0x2,_0x301620['w'],_0x301620['h']),ctx['restore']();if(_0x2841fb&&_0x2841fb['complete']&&_0x2841fb['naturalWidth']>0x0){const _0x4acb13=_0x301620['h']/_0x2841fb['naturalHeight'],_0x28b35f=_0x2841fb['naturalWidth']*_0x4acb13,_0x16da23=_0x301620['h'];ctx['drawImage'](_0x2841fb,-_0x28b35f/0x2,-_0x16da23/0x2,_0x28b35f,_0x16da23);}else _0x301620['type']==='glass'?drawGlass(_0x301620):drawBottle(_0x301620);ctx['restore']();}function drawGlass(_0x385676){const _0x1f75fa=_0x385676['h'],_0x41f771=_0x385676['topW'],_0x432c5a=_0x385676['bottomW'];ctx['beginPath'](),ctx['moveTo'](-_0x41f771/0x2,-_0x1f75fa/0x2),ctx['lineTo'](_0x41f771/0x2,-_0x1f75fa/0x2),ctx['lineTo'](_0x432c5a/0x2,_0x1f75fa/0x2),ctx['lineTo'](-_0x432c5a/0x2,_0x1f75fa/0x2),ctx['closePath']();const _0x3e2d21=ctx['createLinearGradient'](-_0x41f771/0x2,0x0,_0x41f771/0x2,0x0);_0x3e2d21['addColorStop'](0x0,'rgba(255,255,255,0.08)'),_0x3e2d21['addColorStop'](0.3,'rgba(255,255,255,0.2)'),_0x3e2d21['addColorStop'](0.5,'rgba(255,255,255,0.12)'),_0x3e2d21['addColorStop'](0.7,'rgba(255,255,255,0.18)'),_0x3e2d21['addColorStop'](0x1,'rgba(255,255,255,0.05)'),ctx['fillStyle']=_0x3e2d21,ctx['fill'](),ctx['save'](),ctx['beginPath'](),ctx['moveTo'](-_0x41f771/0x2,-_0x1f75fa/0x2),ctx['lineTo'](_0x41f771/0x2,-_0x1f75fa/0x2),ctx['lineTo'](_0x432c5a/0x2,_0x1f75fa/0x2),ctx['lineTo'](-_0x432c5a/0x2,_0x1f75fa/0x2),ctx['closePath'](),ctx['clip']();const _0x5627a8=ctx['createLinearGradient'](0x0,-_0x1f75fa/0x4,0x0,_0x1f75fa/0x2);_0x5627a8['addColorStop'](0x0,'transparent'),_0x5627a8['addColorStop'](0.1,_0x385676['fill']),_0x5627a8['addColorStop'](0.9,_0x385676['fill']),_0x5627a8['addColorStop'](0x1,shadeColor(_0x385676['fill'],-0x1e)),ctx['fillStyle']=_0x5627a8,ctx['globalAlpha']=0.85,ctx['fillRect'](-_0x41f771,-_0x1f75fa*0.15,_0x41f771*0x2,_0x1f75fa),ctx['restore'](),ctx['strokeStyle']='rgba(255,255,255,0.6)',ctx['lineWidth']=0x2,ctx['beginPath'](),ctx['moveTo'](-_0x41f771/0x2,-_0x1f75fa/0x2),ctx['lineTo'](_0x41f771/0x2,-_0x1f75fa/0x2),ctx['stroke'](),ctx['strokeStyle']='rgba(255,255,255,0.35)',ctx['lineWidth']=1.5,ctx['beginPath'](),ctx['moveTo'](-_0x41f771/0x2,-_0x1f75fa/0x2),ctx['lineTo'](_0x41f771/0x2,-_0x1f75fa/0x2),ctx['lineTo'](_0x432c5a/0x2,_0x1f75fa/0x2),ctx['lineTo'](-_0x432c5a/0x2,_0x1f75fa/0x2),ctx['closePath'](),ctx['stroke']();const _0x287fcf=ctx['createLinearGradient'](-_0x41f771/0x2,0x0,-_0x41f771/0x2+0xc,0x0);_0x287fcf['addColorStop'](0x0,'rgba(255,255,255,0.4)'),_0x287fcf['addColorStop'](0x1,'rgba(255,255,255,0)'),ctx['fillStyle']=_0x287fcf,ctx['beginPath'](),ctx['moveTo'](-_0x41f771/0x2+0x3,-_0x1f75fa/0x2+0x4),ctx['lineTo'](-_0x41f771/0x2+0xc,-_0x1f75fa/0x2+0x4),ctx['lineTo'](-_0x432c5a/0x2+0xa,_0x1f75fa/0x2-0x4),ctx['lineTo'](-_0x432c5a/0x2+0x3,_0x1f75fa/0x2-0x4),ctx['closePath'](),ctx['fill'](),ctx['fillStyle']='rgba(255,255,255,0.8)',ctx['beginPath'](),ctx['arc'](-_0x41f771/0x4,-_0x1f75fa/0x2+0x3,0x2,0x0,Math['PI']*0x2),ctx['fill']();}function drawBottle(_0x5d52eb){const _0x24902f=_0x5d52eb['h'],_0x2bbfac=_0x5d52eb['w'],_0x507e95=_0x5d52eb['neckH'],_0x26204d=_0x5d52eb['neckW'],_0x4981d6=_0x24902f-_0x507e95,_0x53544a=ctx['createLinearGradient'](-_0x2bbfac/0x2,0x0,_0x2bbfac/0x2,0x0);_0x53544a['addColorStop'](0x0,'rgba(255,255,255,0.05)'),_0x53544a['addColorStop'](0.2,'rgba(255,255,255,0.18)'),_0x53544a['addColorStop'](0.4,'rgba(255,255,255,0.08)'),_0x53544a['addColorStop'](0.6,'rgba(255,255,255,0.15)'),_0x53544a['addColorStop'](0.8,'rgba(255,255,255,0.1)'),_0x53544a['addColorStop'](0x1,'rgba(255,255,255,0.03)'),ctx['beginPath'](),roundRect(ctx,-_0x2bbfac/0x2,-_0x24902f/0x2+_0x507e95,_0x2bbfac,_0x4981d6,0x8),ctx['fillStyle']=_0x53544a,ctx['fill'](),ctx['beginPath'](),ctx['moveTo'](-_0x26204d/0x2,-_0x24902f/0x2+_0x507e95),ctx['lineTo'](-_0x26204d/0x2-0x4,-_0x24902f/0x2+_0x507e95-0x5),ctx['lineTo'](-_0x26204d/0x2,-_0x24902f/0x2+0xc),ctx['quadraticCurveTo'](-_0x26204d/0x2,-_0x24902f/0x2+0x4,-_0x26204d/0x4,-_0x24902f/0x2+0x2),ctx['lineTo'](_0x26204d/0x4,-_0x24902f/0x2+0x2),ctx['quadraticCurveTo'](_0x26204d/0x2,-_0x24902f/0x2+0x4,_0x26204d/0x2,-_0x24902f/0x2+0xc),ctx['lineTo'](_0x26204d/0x2+0x4,-_0x24902f/0x2+_0x507e95-0x5),ctx['lineTo'](_0x26204d/0x2,-_0x24902f/0x2+_0x507e95),ctx['closePath'](),ctx['fillStyle']=_0x53544a,ctx['fill'](),ctx['save'](),ctx['beginPath'](),roundRect(ctx,-_0x2bbfac/0x2,-_0x24902f/0x2+_0x507e95,_0x2bbfac,_0x4981d6,0x8),ctx['clip']();const _0x50c508=ctx['createLinearGradient'](0x0,0x0,0x0,_0x4981d6);_0x50c508['addColorStop'](0x0,_0x5d52eb['fill']),_0x50c508['addColorStop'](0.8,_0x5d52eb['fill']),_0x50c508['addColorStop'](0x1,shadeColor(_0x5d52eb['fill'],-0x19)),ctx['fillStyle']=_0x50c508,ctx['globalAlpha']=0.7,ctx['fillRect'](-_0x2bbfac,_0x24902f/0x2-_0x4981d6*0.6,_0x2bbfac*0x2,_0x4981d6),ctx['restore'](),ctx['strokeStyle']='rgba(255,255,255,0.4)',ctx['lineWidth']=0x2,ctx['beginPath'](),roundRect(ctx,-_0x2bbfac/0x2,-_0x24902f/0x2+_0x507e95,_0x2bbfac,_0x4981d6,0x8),ctx['stroke'](),ctx['beginPath'](),ctx['moveTo'](-_0x26204d/0x2,-_0x24902f/0x2+_0x507e95),ctx['lineTo'](-_0x26204d/0x2,-_0x24902f/0x2+0xc),ctx['quadraticCurveTo'](-_0x26204d/0x2,-_0x24902f/0x2+0x4,0x0,-_0x24902f/0x2+0x2),ctx['quadraticCurveTo'](_0x26204d/0x2,-_0x24902f/0x2+0x4,_0x26204d/0x2,-_0x24902f/0x2+0xc),ctx['lineTo'](_0x26204d/0x2,-_0x24902f/0x2+_0x507e95),ctx['stroke']();const _0x4d2530=ctx['createLinearGradient'](-_0x26204d/0x2,-_0x24902f/0x2,_0x26204d/0x2,-_0x24902f/0x2);_0x4d2530['addColorStop'](0x0,'#333'),_0x4d2530['addColorStop'](0.5,'#555'),_0x4d2530['addColorStop'](0x1,'#222'),ctx['fillStyle']=_0x4d2530,ctx['fillRect'](-_0x26204d/0x2+0x2,-_0x24902f/0x2,_0x26204d-0x4,0x6);const _0x242614=ctx['createLinearGradient'](-_0x2bbfac/0x2,0x0,-_0x2bbfac/0x2+0xf,0x0);_0x242614['addColorStop'](0x0,'rgba(255,255,255,0.35)'),_0x242614['addColorStop'](0x1,'rgba(255,255,255,0)'),ctx['fillStyle']=_0x242614,ctx['fillRect'](-_0x2bbfac/0x2+0x3,-_0x24902f/0x2+_0x507e95+0x8,0xc,_0x4981d6-0x14),ctx['fillStyle']='rgba(255,255,255,0.12)',ctx['fillRect'](-_0x2bbfac/0x2+0x8,_0x24902f/0x2-_0x4981d6/0x2-0x12,_0x2bbfac-0x10,0x24),ctx['strokeStyle']='rgba(255,255,255,0.2)',ctx['lineWidth']=0x1,ctx['strokeRect'](-_0x2bbfac/0x2+0x8,_0x24902f/0x2-_0x4981d6/0x2-0x12,_0x2bbfac-0x10,0x24),ctx['fillStyle']='rgba(255,255,255,0.9)',ctx['beginPath'](),ctx['arc'](-_0x2bbfac/0x4,-_0x24902f/0x2+_0x507e95+0xf,2.5,0x0,Math['PI']*0x2),ctx['fill']();}function shadeColor(_0x58dc2c,_0x54f88f){const _0x26a8dd=parseInt(_0x58dc2c['replace']('#',''),0x10),_0x990e2c=Math['round'](2.55*_0x54f88f),_0x172f1e=Math['max'](0x0,Math['min'](0xff,(_0x26a8dd>>0x10)+_0x990e2c)),_0x26b5e8=Math['max'](0x0,Math['min'](0xff,(_0x26a8dd>>0x8&0xff)+_0x990e2c)),_0x776ce7=Math['max'](0x0,Math['min'](0xff,(_0x26a8dd&0xff)+_0x990e2c));return'#'+(0x1000000+_0x172f1e*0x10000+_0x26b5e8*0x100+_0x776ce7)['toString'](0x10)['slice'](0x1);}function drawParticles(){for(const _0x8a984f of state['particles']){ctx['globalAlpha']=_0x8a984f['life'],ctx['fillStyle']=_0x8a984f['color'],ctx['beginPath'](),ctx['arc'](_0x8a984f['x'],_0x8a984f['y'],_0x8a984f['size'],0x0,Math['PI']*0x2),ctx['fill']();}ctx['globalAlpha']=0x1;}function roundRect(_0x12d5e1,_0x266ec5,_0x557d2e,_0x27aab7,_0x14c881,_0x5bdbdc){_0x12d5e1['moveTo'](_0x266ec5+_0x5bdbdc,_0x557d2e),_0x12d5e1['arcTo'](_0x266ec5+_0x27aab7,_0x557d2e,_0x266ec5+_0x27aab7,_0x557d2e+_0x14c881,_0x5bdbdc),_0x12d5e1['arcTo'](_0x266ec5+_0x27aab7,_0x557d2e+_0x14c881,_0x266ec5,_0x557d2e+_0x14c881,_0x5bdbdc),_0x12d5e1['arcTo'](_0x266ec5,_0x557d2e+_0x14c881,_0x266ec5,_0x557d2e,_0x5bdbdc),_0x12d5e1['arcTo'](_0x266ec5,_0x557d2e,_0x266ec5+_0x27aab7,_0x557d2e,_0x5bdbdc);}function updateUI(){if(ui['score'])ui['score']['textContent']=state['score'];if(ui['combo'])ui['combo']['textContent']=state['combo']>0x1?state['combo']+'x':'';}function updatePowerBar(){if(ui['powerFill'])ui['powerFill']['style']['width']=state['power']+'%';if(ui['powerText'])ui['powerText']['textContent']=Math['round'](state['power'])+'%';}function showMessage(_0x5d0228,_0x312369){if(!ui['message'])return;ui['message']['textContent']=_0x5d0228,ui['message']['style']['color']=_0x312369,ui['message']['classList']['add']('show'),setTimeout(()=>ui['message']['classList']['remove']('show'),0x4b0);}function cycleItem(){const _0x55a4d9=Object['keys'](ITEMS),_0x5e8138=_0x55a4d9['indexOf'](state['currentItem']);state['currentItem']=_0x55a4d9[(_0x5e8138+0x1)%_0x55a4d9['length']],resetObject();const _0x52c718=ITEMS[state['currentItem']];showMessage(_0x52c718['name'],'#3b82f6');}function cycleSurface(){const _0x2a4f4a=Object['keys'](SURFACES),_0x110bf0=_0x2a4f4a['indexOf'](state['currentSurface']);state['currentSurface']=_0x2a4f4a[(_0x110bf0+0x1)%_0x2a4f4a['length']];const _0x1810af=SURFACES[state['currentSurface']];showMessage(_0x1810af['name'],'#8b5cf6');}function toggleSound(){state['soundOn']=!state['soundOn'];if(ui['soundBtn'])ui['soundBtn']['textContent']=state['soundOn']?'ðŸ”Š':'ðŸ”‡';}let audioCtx;function playSound(_0x3629cc){if(!state['soundOn'])return;try{if(!audioCtx)audioCtx=new(window['AudioContext']||window['webkitAudioContext'])();const _0x343663=audioCtx['createOscillator'](),_0x24be7b=audioCtx['createGain'](),_0xec6bd7={'launch':{'freq':0x190,'type':'triangle','dur':0.1},'bounce':{'freq':0x96,'type':'square','dur':0.08},'success':{'freq':0x258,'type':'sine','dur':0.15},'fail':{'freq':0x64,'type':'sawtooth','dur':0.2}},_0x205f03=_0xec6bd7[_0x3629cc]||_0xec6bd7['bounce'];_0x343663['type']=_0x205f03['type'],_0x343663['frequency']['setValueAtTime'](_0x205f03['freq'],audioCtx['currentTime']),_0x343663['frequency']['exponentialRampToValueAtTime'](_0x205f03['freq']/0x2,audioCtx['currentTime']+_0x205f03['dur']),_0x24be7b['gain']['setValueAtTime'](0.06,audioCtx['currentTime']),_0x24be7b['gain']['exponentialRampToValueAtTime'](0.001,audioCtx['currentTime']+_0x205f03['dur']),_0x343663['connect'](_0x24be7b),_0x24be7b['connect'](audioCtx['destination']),_0x343663['start'](),_0x343663['stop'](audioCtx['currentTime']+_0x205f03['dur']+0.05);}catch(_0x5bb1fa){}}async function saveScore(){if(!state['username']||state['score']===0x0)return;try{await fetch('/api/leaderboard',{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON['stringify']({'username':state['username'],'score':state['score'],'stats':{'longestCombo':state['bestCombo']}})});}catch(_0xe40f98){}}async function loadLeaderboard(){if(!ui['leaderboard'])return;ui['leaderboard']['innerHTML']='<li>YÃ¼kleniyor...</li>';try{const _0xb9733f=await fetch('/api/leaderboard'),_0x16d357=await _0xb9733f['json']();ui['leaderboard']['innerHTML']='';if(!_0x16d357||_0x16d357['length']===0x0){ui['leaderboard']['innerHTML']='<li>HenÃ¼z\x20skor\x20yok</li>';return;}_0x16d357['slice'](0x0,0x5)['forEach']((_0x2d8040,_0x43ea9f)=>{const _0x25d87d=document['createElement']('li');_0x25d87d['className']=_0x43ea9f<0x3?'rank-'+(_0x43ea9f+0x1):'',_0x25d87d['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22rank-num\x22>'+(_0x43ea9f+0x1)+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22>'+escapeHtml(_0x2d8040['username'])+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22pts\x22>'+_0x2d8040['score']+'</span>\x0a\x20\x20\x20\x20\x20\x20',ui['leaderboard']['appendChild'](_0x25d87d);});}catch(_0x52383b){ui['leaderboard']['innerHTML']='<li\x20style=\x22color:#ef4444\x22>BaÄŸlantÄ±\x20hatasÄ±</li>';}}function escapeHtml(_0x4b9d0e){const _0x1103c9=document['createElement']('div');return _0x1103c9['textContent']=_0x4b9d0e,_0x1103c9['innerHTML'];}window['onload']=init;